(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{195:e=>{"use strict";e.exports=require("node:buffer")},730:(e,t,r)=>{"use strict";let n,s,a,i,o,l,c,u,h,d,f,p,g,m,v;r.r(t),r.d(t,{ComponentMod:()=>sy,default:()=>sw});var y,w,_,b,x,S,E,P,C,A,T,R,O,N,I,M,k,D,L,j,$,B,U,H,q,F,G,V,W,J,K,X,z,Y,Q,Z,ee,et,er,en,es,ea={};r.r(ea),r.d(ea,{APIConnectionError:()=>t1,APIConnectionTimeoutError:()=>t4,APIError:()=>tZ,APIUserAbortError:()=>t0,AuthenticationError:()=>t3,BadRequestError:()=>t2,ConflictError:()=>t6,InternalServerError:()=>re,NotFoundError:()=>t9,OpenAIError:()=>tQ,PermissionDeniedError:()=>t7,RateLimitError:()=>t8,UnprocessableEntityError:()=>t5});var ei={};r.r(ei),r.d(ei,{POST:()=>sc,runtime:()=>sl});var eo={};async function el(){if("_ENTRIES"in globalThis&&_ENTRIES.middleware_instrumentation&&_ENTRIES.middleware_instrumentation.register)try{await _ENTRIES.middleware_instrumentation.register()}catch(e){throw e.message=`An error occurred while loading instrumentation hook: ${e.message}`,e}}r.r(eo),r.d(eo,{headerHooks:()=>sg,originalPathname:()=>sv,requestAsyncStorage:()=>sd,routeModule:()=>sh,serverHooks:()=>sp,staticGenerationAsyncStorage:()=>sf,staticGenerationBailout:()=>sm});let ec=null;function eu(){return ec||(ec=el()),ec}function eh(e){return`The edge runtime does not support Node.js '${e}' module.
Learn More: https://nextjs.org/docs/messages/node-module-in-edge-runtime`}process!==r.g.process&&(process.env=r.g.process.env,r.g.process=process),Object.defineProperty(globalThis,"__import_unsupported",{value:function(e){let t=new Proxy(function(){},{get(t,r){if("then"===r)return{};throw Error(eh(e))},construct(){throw Error(eh(e))},apply(r,n,s){if("function"==typeof s[0])return s[0](t);throw Error(eh(e))}});return new Proxy({},{get:()=>t})},enumerable:!1,configurable:!1}),eu();class ed extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class ef extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class ep extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}function eg(e){let t={},r=[];if(e)for(let[n,s]of e.entries())"set-cookie"===n.toLowerCase()?(r.push(...function(e){var t,r,n,s,a,i=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),s=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=s,i.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&i.push(e.substring(t,e.length))}return i}(s)),t[n]=1===r.length?r[0]:r):t[n]=s;return t}function em(e){try{return String(new URL(String(e)))}catch(t){throw Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t})}}let ev=Symbol("response"),ey=Symbol("passThrough"),ew=Symbol("waitUntil");class e_{constructor(e){this[ew]=[],this[ey]=!1}respondWith(e){this[ev]||(this[ev]=Promise.resolve(e))}passThroughOnException(){this[ey]=!0}waitUntil(e){this[ew].push(e)}}class eb extends e_{constructor(e){super(e.request),this.sourcePage=e.page}get request(){throw new ed({page:this.sourcePage})}respondWith(){throw new ed({page:this.sourcePage})}}function ex(e){return e.replace(/\/$/,"")||"/"}function eS(e){let t=e.indexOf("#"),r=e.indexOf("?"),n=r>-1&&(t<0||r<t);return n||t>-1?{pathname:e.substring(0,n?r:t),query:n?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}function eE(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=eS(e);return""+t+r+n+s}function eP(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:s}=eS(e);return""+r+t+n+s}function eC(e,t){if("string"!=typeof e)return!1;let{pathname:r}=eS(e);return r===t||r.startsWith(t+"/")}function eA(e,t){if(!eC(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}let eT=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function eR(e,t){return new URL(String(e).replace(eT,"localhost"),t&&String(t).replace(eT,"localhost"))}let eO=Symbol("NextURLInternal");class eN{constructor(e,t,r){let n,s;"object"==typeof t&&"pathname"in t||"string"==typeof t?(n=t,s=r||{}):s=r||t||{},this[eO]={url:eR(e,n??s.base),options:s,basePath:""},this.analyze()}analyze(){var e,t,r,n,s;let a=function(e,t){var r,n,s;let{basePath:a,i18n:i,trailingSlash:o}=null!=(r=t.nextConfig)?r:{},l={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):o};if(a&&eC(l.pathname,a)&&(l.pathname=eA(l.pathname,a),l.basePath=a),!0===t.parseData&&l.pathname.startsWith("/_next/data/")&&l.pathname.endsWith(".json")){let e=l.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/"),t=e[0];l.pathname="index"!==e[1]?"/"+e.slice(1).join("/"):"/",l.buildId=t}if(t.i18nProvider){let e=t.i18nProvider.analyze(l.pathname);l.locale=e.detectedLocale,l.pathname=null!=(n=e.pathname)?n:l.pathname}else if(i){let e=function(e,t){let r;let n=e.split("/");return(t||[]).some(t=>!!n[1]&&n[1].toLowerCase()===t.toLowerCase()&&(r=t,n.splice(1,1),e=n.join("/")||"/",!0)),{pathname:e,detectedLocale:r}}(l.pathname,i.locales);l.locale=e.detectedLocale,l.pathname=null!=(s=e.pathname)?s:l.pathname}return l}(this[eO].url.pathname,{nextConfig:this[eO].options.nextConfig,parseData:!0,i18nProvider:this[eO].options.i18nProvider}),i=function(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":")[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}(this[eO].url,this[eO].options.headers);this[eO].domainLocale=this[eO].options.i18nProvider?this[eO].options.i18nProvider.detectDomainLocale(i):function(e,t,r){if(e)for(let a of(r&&(r=r.toLowerCase()),e)){var n,s;let e=null==(n=a.domain)?void 0:n.split(":")[0].toLowerCase();if(t===e||r===a.defaultLocale.toLowerCase()||(null==(s=a.locales)?void 0:s.some(e=>e.toLowerCase()===r)))return a}}(null==(e=this[eO].options.nextConfig)?void 0:null==(t=e.i18n)?void 0:t.domains,i);let o=(null==(r=this[eO].domainLocale)?void 0:r.defaultLocale)||(null==(n=this[eO].options.nextConfig)?void 0:null==(s=n.i18n)?void 0:s.defaultLocale);this[eO].url.pathname=a.pathname,this[eO].defaultLocale=o,this[eO].basePath=a.basePath??"",this[eO].buildId=a.buildId,this[eO].locale=a.locale??o,this[eO].trailingSlash=a.trailingSlash}formatPathname(){var e;let t;return t=function(e,t,r,n){if(!t||t===r)return e;let s=e.toLowerCase();return!n&&(eC(s,"/api")||eC(s,"/"+t.toLowerCase()))?e:eE(e,"/"+t)}((e={basePath:this[eO].basePath,buildId:this[eO].buildId,defaultLocale:this[eO].options.forceLocale?void 0:this[eO].defaultLocale,locale:this[eO].locale,pathname:this[eO].url.pathname,trailingSlash:this[eO].trailingSlash}).pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix),(e.buildId||!e.trailingSlash)&&(t=ex(t)),e.buildId&&(t=eP(eE(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=eE(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:eP(t,"/"):ex(t)}formatSearch(){return this[eO].url.search}get buildId(){return this[eO].buildId}set buildId(e){this[eO].buildId=e}get locale(){return this[eO].locale??""}set locale(e){var t,r;if(!this[eO].locale||!(null==(t=this[eO].options.nextConfig)?void 0:null==(r=t.i18n)?void 0:r.locales.includes(e)))throw TypeError(`The NextURL configuration includes no locale "${e}"`);this[eO].locale=e}get defaultLocale(){return this[eO].defaultLocale}get domainLocale(){return this[eO].domainLocale}get searchParams(){return this[eO].url.searchParams}get host(){return this[eO].url.host}set host(e){this[eO].url.host=e}get hostname(){return this[eO].url.hostname}set hostname(e){this[eO].url.hostname=e}get port(){return this[eO].url.port}set port(e){this[eO].url.port=e}get protocol(){return this[eO].url.protocol}set protocol(e){this[eO].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[eO].url=eR(e),this.analyze()}get origin(){return this[eO].url.origin}get pathname(){return this[eO].url.pathname}set pathname(e){this[eO].url.pathname=e}get hash(){return this[eO].url.hash}set hash(e){this[eO].url.hash=e}get search(){return this[eO].url.search}set search(e){this[eO].url.search=e}get password(){return this[eO].url.password}set password(e){this[eO].url.password=e}get username(){return this[eO].url.username}set username(e){this[eO].url.username=e}get basePath(){return this[eO].basePath}set basePath(e){this[eO].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new eN(String(this),this[eO].options)}}var eI=r(627);let eM=Symbol("internal request");class ek extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);em(r),e instanceof Request?super(e,t):super(r,t);let n=new eN(r,{headers:eg(this.headers),nextConfig:t.nextConfig});this[eM]={cookies:new eI.q(this.headers),geo:t.geo||{},ip:t.ip,nextUrl:n,url:n.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,geo:this.geo,ip:this.ip,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[eM].cookies}get geo(){return this[eM].geo}get ip(){return this[eM].ip}get nextUrl(){return this[eM].nextUrl}get page(){throw new ef}get ua(){throw new ep}get url(){return this[eM].url}}let eD=Symbol("internal response"),eL=new Set([301,302,303,307,308]);function ej(e,t){var r;if(null==e?void 0:null==(r=e.request)?void 0:r.headers){if(!(e.request.headers instanceof Headers))throw Error("request.headers must be an instance of Headers");let r=[];for(let[n,s]of e.request.headers)t.set("x-middleware-request-"+n,s),r.push(n);t.set("x-middleware-override-headers",r.join(","))}}class e$ extends Response{constructor(e,t={}){super(e,t),this[eD]={cookies:new eI.n(this.headers),url:t.url?new eN(t.url,{headers:eg(this.headers),nextConfig:t.nextConfig}):void 0}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,url:this.url,body:this.body,bodyUsed:this.bodyUsed,headers:Object.fromEntries(this.headers),ok:this.ok,redirected:this.redirected,status:this.status,statusText:this.statusText,type:this.type}}get cookies(){return this[eD].cookies}static json(e,t){let r=Response.json(e,t);return new e$(r.body,r)}static redirect(e,t){let r="number"==typeof t?t:(null==t?void 0:t.status)??307;if(!eL.has(r))throw RangeError('Failed to execute "redirect" on "response": Invalid status code');let n="object"==typeof t?t:{},s=new Headers(null==n?void 0:n.headers);return s.set("Location",em(e)),new e$(null,{...n,headers:s,status:r})}static rewrite(e,t){let r=new Headers(null==t?void 0:t.headers);return r.set("x-middleware-rewrite",em(e)),ej(t,r),new e$(null,{...t,headers:r})}static next(e){let t=new Headers(null==e?void 0:e.headers);return t.set("x-middleware-next","1"),ej(e,t),new e$(null,{...e,headers:t})}}function eB(e,t){let r="string"==typeof t?new URL(t):t,n=new URL(e,t),s=r.protocol+"//"+r.host;return n.protocol+"//"+n.host===s?n.toString().replace(s,""):n.toString()}let eU="Next-Router-State-Tree",eH="Next-Router-Prefetch",eq="x-vercel-sc-headers",eF=[["RSC"],[eU],[eH]],eG=["__nextFallback","__nextLocale","__nextInferredLocaleFromDefault","__nextDefaultLocale","__nextIsNotFound","_rsc"],eV=["__nextDataReq"],eW="nxtP",eJ="x-prerender-revalidate",eK={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"actionBrowser",api:"api",middleware:"middleware",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",appMetadataRoute:"app-metadata-route"};({...eK,GROUP:{server:[eK.reactServerComponents,eK.actionBrowser,eK.appMetadataRoute]}});var eX=r(183),ez=r(375);let eY="__prerender_bypass";Symbol("__next_preview_data"),Symbol(eY);class eQ{constructor(e,t,r,n){var s;let a=e&&function(e,t){let r=eX.h.from(e.headers),n=r.get(eJ),s=n===t.previewModeId,a=r.has("x-prerender-revalidate-if-generated");return{isOnDemandRevalidate:s,revalidateOnlyGenerated:a}}(t,e).isOnDemandRevalidate,i=null==(s=r.get(eY))?void 0:s.value;this.isEnabled=!!(!a&&i&&e&&i===e.previewModeId),this._previewModeId=null==e?void 0:e.previewModeId,this._mutableCookies=n}enable(){if(!this._previewModeId)throw Error("Invariant: previewProps missing previewModeId this should never happen");this._mutableCookies.set({name:eY,value:this._previewModeId,httpOnly:!0,sameSite:"none",secure:!0,path:"/"})}disable(){this._mutableCookies.set({name:eY,value:"",httpOnly:!0,sameSite:"none",secure:!0,path:"/",expires:new Date(0)})}}let eZ={wrap(e,{req:t,res:r,renderOpts:n},s){let a;function i(e){r&&r.setHeader("Set-Cookie",e)}n&&"previewProps"in n&&(a=n.previewProps);let o={},l={get headers(){return o.headers||(o.headers=function(e){let t=eX.h.from(e);for(let e of eF)t.delete(e.toString().toLowerCase());return eX.h.seal(t)}(t.headers)),o.headers},get cookies(){return o.cookies||(o.cookies=function(e){let t=new eI.q(eX.h.from(e));return ez.Qb.seal(t)}(t.headers)),o.cookies},get mutableCookies(){return o.mutableCookies||(o.mutableCookies=function(e,t){let r=new eI.q(eX.h.from(e));return ez.vr.wrap(r,t)}(t.headers,(null==n?void 0:n.onUpdateCookies)||(r?i:void 0))),o.mutableCookies},get draftMode(){return o.draftMode||(o.draftMode=new eQ(a,t,this.cookies,this.mutableCookies)),o.draftMode}};return e.run(l,s,l)}};var e0=r(533);class e1 extends ek{constructor(e){super(e.input,e.init),this.sourcePage=e.page}get request(){throw new ed({page:this.sourcePage})}respondWith(){throw new ed({page:this.sourcePage})}waitUntil(){throw new ed({page:this.sourcePage})}}let e4=[["RSC"],[eU],[eH],[eq]];async function e2(e){let t,r;await eu();let n=void 0!==self.__BUILD_MANIFEST,s="string"==typeof self.__PRERENDER_MANIFEST?JSON.parse(self.__PRERENDER_MANIFEST):void 0;e.request.url=e.request.url.replace(/\.rsc($|\?)/,"$1");let a=new eN(e.request.url,{headers:e.request.headers,nextConfig:e.request.nextConfig}),i=[...a.searchParams.keys()];for(let e of i){let t=a.searchParams.getAll(e);if(e!==eW&&e.startsWith(eW)){let r=e.substring(eW.length);for(let e of(a.searchParams.delete(r),t))a.searchParams.append(r,e);a.searchParams.delete(e)}}let o=a.buildId;a.buildId="";let l=e.request.headers["x-nextjs-data"];l&&"/index"===a.pathname&&(a.pathname="/");let c=function(e){let t=new Headers;for(let[r,n]of Object.entries(e)){let e=Array.isArray(n)?n:[n];for(let n of e)void 0!==n&&("number"==typeof n&&(n=n.toString()),t.append(r,n))}return t}(e.request.headers),u=new Map;if(!n)for(let e of e4){let t=e.toString().toLowerCase(),r=c.get(t);r&&(u.set(t,c.get(t)),c.delete(t))}let h=new e1({page:e.page,input:(function(e,t){let r="string"==typeof e,n=r?new URL(e):e;for(let e of eG)n.searchParams.delete(e);if(t)for(let e of eV)n.searchParams.delete(e);return r?n.toString():n})(a,!0).toString(),init:{body:e.request.body,geo:e.request.geo,headers:c,ip:e.request.ip,method:e.request.method,nextConfig:e.request.nextConfig,signal:e.request.signal}});l&&Object.defineProperty(h,"__isData",{enumerable:!1,value:!0}),!globalThis.__incrementalCache&&e.IncrementalCache&&(globalThis.__incrementalCache=new e.IncrementalCache({appDir:!0,fetchCache:!0,minimalMode:!0,fetchCacheKeyPrefix:void 0,dev:!1,requestHeaders:e.request.headers,requestProtocol:"https",getPrerenderManifest:()=>({version:-1,routes:{},dynamicRoutes:{},notFoundRoutes:[],preview:{previewModeId:"development-id"}})}));let d=new eb({request:h,page:e.page});if((t="/middleware"===e.page?await eZ.wrap(e0.requestAsyncStorage,{req:h,renderOpts:{onUpdateCookies:e=>{r=e},previewProps:(null==s?void 0:s.preview)||{previewModeId:"development-id",previewModeEncryptionKey:"",previewModeSigningKey:""}}},()=>e.handler(h,d)):await e.handler(h,d))&&!(t instanceof Response))throw TypeError("Expected an instance of Response to be returned");t&&r&&t.headers.set("set-cookie",r);let f=null==t?void 0:t.headers.get("x-middleware-rewrite");if(t&&f){let r=new eN(f,{forceLocale:!0,headers:e.request.headers,nextConfig:e.request.nextConfig});r.host===h.nextUrl.host&&(r.buildId=o||r.buildId,t.headers.set("x-middleware-rewrite",String(r)));let n=eB(String(r),String(a));l&&t.headers.set("x-nextjs-rewrite",n)}let p=null==t?void 0:t.headers.get("Location");if(t&&p&&!n){let r=new eN(p,{forceLocale:!1,headers:e.request.headers,nextConfig:e.request.nextConfig});t=new Response(t.body,t),r.host===h.nextUrl.host&&(r.buildId=o||r.buildId,t.headers.set("Location",String(r))),l&&(t.headers.delete("Location"),t.headers.set("x-nextjs-redirect",eB(String(r),String(a))))}let g=t||e$.next(),m=g.headers.get("x-middleware-override-headers"),v=[];if(m){for(let[e,t]of u)g.headers.set(`x-middleware-request-${e}`,t),v.push(e);v.length>0&&g.headers.set("x-middleware-override-headers",m+","+v.join(","))}return{response:g,waitUntil:Promise.all(d[ew])}}var e3=r(937),e7=r.n(e3),e9=r(441),e6=r.n(e9);let e5=e=>{let t=["/"];for(let r of e||[])if(r.startsWith("/")){let e=r.split("/");for(let r=1;r<e.length+1;r++){let n=e.slice(0,r).join("/");n&&(t.push(n),t.includes(n)||t.push(n))}}else t.includes(r)||t.push(r);return t};class e8{constructor(e){this.fs=e.fs,this.flushToDisk=e.flushToDisk,this.serverDistDir=e.serverDistDir,this.appDir=!!e._appDir,this.revalidatedTags=e.revalidatedTags,e.maxMemoryCacheSize&&!n&&(n=new(e7())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})),this.serverDistDir&&this.fs&&(this.tagsManifestPath=e6().join(this.serverDistDir,"..","cache","fetch-cache","tags-manifest.json"),this.loadTagsManifest())}loadTagsManifest(){if(this.tagsManifestPath&&this.fs&&!s)try{s=JSON.parse(this.fs.readFileSync(this.tagsManifestPath).toString("utf8"))}catch(e){s={version:1,items:{}}}}async setTags(e,t){if(this.loadTagsManifest(),s&&this.tagsManifestPath){for(let r of t){let t=s.items[r]||{keys:[]};t.keys.includes(e)||t.keys.push(e),s.items[r]=t}try{await this.fs.mkdir(e6().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(s||{}))}catch(e){console.warn("Failed to update tags manifest.",e)}}}async revalidateTag(e){if(this.loadTagsManifest(),!s||!this.tagsManifestPath)return;let t=s.items[e]||{keys:[]};t.revalidatedAt=Date.now(),s.items[e]=t;try{await this.fs.mkdir(e6().dirname(this.tagsManifestPath)),await this.fs.writeFile(this.tagsManifestPath,JSON.stringify(s||{}))}catch(e){console.warn("Failed to update tags manifest.",e)}}async get(e,t){var r,a,i,o;let l;let c=null==n?void 0:n.get(e);if((null==c?void 0:null==(r=c.value)?void 0:r.kind)==="PAGE"){let e=null==(o=c.value.headers)?void 0:o["x-next-cache-tags"];"string"==typeof e&&(l=e.split(","))}if((null==c?void 0:null==(a=c.value)?void 0:a.kind)==="PAGE"&&(null==l?void 0:l.length)){this.loadTagsManifest();let e=e5(l||[]),t=e.some(e=>{var t;return(null==(t=null==s?void 0:s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==c?void 0:c.lastModified)||Date.now())});t&&(c=void 0)}if(c&&(null==c?void 0:null==(i=c.value)?void 0:i.kind)==="FETCH"){this.loadTagsManifest();let e=c.value.data,t=e5(e.tags||[]),r=t.some(e=>{var t;return!!this.revalidatedTags.includes(e)||(null==(t=null==s?void 0:s.items[e])?void 0:t.revalidatedAt)&&(null==s?void 0:s.items[e].revalidatedAt)>=((null==c?void 0:c.lastModified)||Date.now())});r&&(c=void 0)}return c||null}async set(e,t){if(null==n||n.set(e,{value:t,lastModified:Date.now()}),this.flushToDisk){if((null==t?void 0:t.kind)==="ROUTE"){let{filePath:r}=await this.getFsPath({pathname:`${e}.body`,appDir:!0});await this.fs.mkdir(e6().dirname(r)),await this.fs.writeFile(r,t.body),await this.fs.writeFile(r.replace(/\.body$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}));return}if((null==t?void 0:t.kind)==="PAGE"){let r="string"==typeof t.pageData,{filePath:n}=await this.getFsPath({pathname:`${e}.html`,appDir:r});await this.fs.mkdir(e6().dirname(n)),await this.fs.writeFile(n,t.html),await this.fs.writeFile((await this.getFsPath({pathname:`${e}.${r?"rsc":"json"}`,appDir:r})).filePath,r?t.pageData:JSON.stringify(t.pageData)),(t.headers||t.status)&&await this.fs.writeFile(n.replace(/\.html$/,".meta"),JSON.stringify({headers:t.headers,status:t.status}))}else if((null==t?void 0:t.kind)==="FETCH"){let{filePath:r}=await this.getFsPath({pathname:e,fetchCache:!0});await this.fs.mkdir(e6().dirname(r)),await this.fs.writeFile(r,JSON.stringify(t)),await this.setTags(e,t.data.tags||[])}}}async getFsPath({pathname:e,appDir:t,fetchCache:r}){if(r)return{filePath:e6().join(this.serverDistDir,"..","cache","fetch-cache",e),isAppPath:!1};let n=e6().join(this.serverDistDir,"pages",e);if(!this.appDir||!1===t)return{filePath:n,isAppPath:!1};try{return await this.fs.readFile(n),{filePath:n,isAppPath:!1}}catch(t){return{filePath:e6().join(this.serverDistDir,"app",e),isAppPath:!0}}}}let te=/\/\[[^/]+?\](?=\/|$)/,tt="undefined"!=typeof performance;tt&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class tr extends Error{}function tn(e){var t;let r=(t=/^\/index(\/|$)/.test(e)&&!te.test(e)?"/index"+e:"/"===e?"/index":e).startsWith("/")?t:"/"+t;return r}let ts=0;class ta{static isAvailable(e){return!!(e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL)}constructor(e){if(this.debug=!!process.env.NEXT_PRIVATE_DEBUG_CACHE,this.headers={},this.revalidatedTags=e.revalidatedTags,this.headers["Content-Type"]="application/json",eq in e._requestHeaders){let t=JSON.parse(e._requestHeaders[eq]);for(let e in t)this.headers[e]=t[e];delete e._requestHeaders[eq]}let t=e._requestHeaders["x-vercel-sc-host"]||process.env.SUSPENSE_CACHE_URL,r=e._requestHeaders["x-vercel-sc-basepath"]||process.env.SUSPENSE_CACHE_BASEPATH;process.env.SUSPENSE_CACHE_AUTH_TOKEN&&(this.headers.Authorization=`Bearer ${process.env.SUSPENSE_CACHE_AUTH_TOKEN}`),t?(this.cacheEndpoint=`https://${t}${r||""}`,this.debug&&console.log("using cache endpoint",this.cacheEndpoint)):this.debug&&console.log("no cache endpoint available"),e.maxMemoryCacheSize?a||(this.debug&&console.log("using memory store for fetch cache"),a=new(e7())({max:e.maxMemoryCacheSize,length({value:e}){var t;if(!e)return 25;if("REDIRECT"===e.kind)return JSON.stringify(e.props).length;if("IMAGE"===e.kind)throw Error("invariant image should not be incremental-cache");return"FETCH"===e.kind?JSON.stringify(e.data||"").length:"ROUTE"===e.kind?e.body.length:e.html.length+((null==(t=JSON.stringify(e.pageData))?void 0:t.length)||0)}})):this.debug&&console.log("not using memory store for fetch cache")}async revalidateTag(e){if(this.debug&&console.log("revalidateTag",e),Date.now()<ts){this.debug&&console.log("rate limited ",ts);return}try{let t=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/revalidate?tags=${e}`,{method:"POST",headers:this.headers,next:{internal:!0}});if(429===t.status){let e=t.headers.get("retry-after")||"60000";ts=Date.now()+parseInt(e)}if(!t.ok)throw Error(`Request failed with status ${t.status}.`)}catch(t){console.warn(`Failed to revalidate tag ${e}`,t)}}async get(e,t,r,n){var s;if(!t)return null;if(Date.now()<ts)return this.debug&&console.log("rate limited"),null;let i=null==a?void 0:a.get(e);if(Date.now()-((null==i?void 0:i.lastModified)||0)>2e3&&(i=void 0),!i&&this.cacheEndpoint)try{let t=Date.now(),s=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"GET",headers:{...this.headers,"X-Vercel-Cache-Item-Name":r},next:{internal:!0,fetchType:"cache-get",fetchUrl:r,fetchIdx:n}});if(429===s.status){let e=s.headers.get("retry-after")||"60000";ts=Date.now()+parseInt(e)}if(404===s.status)return this.debug&&console.log(`no fetch cache entry for ${e}, duration: ${Date.now()-t}ms`),null;if(!s.ok)throw console.error(await s.text()),Error(`invalid response from cache ${s.status}`);let o=await s.json();if(!o||"FETCH"!==o.kind)throw this.debug&&console.log({cached:o}),Error("invalid cache value");let l=s.headers.get("x-vercel-cache-state"),c=s.headers.get("age");i={value:o,lastModified:"fresh"!==l?Date.now()-31536e3:Date.now()-1e3*parseInt(c||"0",10)},this.debug&&console.log(`got fetch cache entry for ${e}, duration: ${Date.now()-t}ms, size: ${Object.keys(o).length}, cache-state: ${l}`),i&&(null==a||a.set(e,i))}catch(e){this.debug&&console.error("Failed to get from fetch-cache",e)}if((null==i?void 0:null==(s=i.value)?void 0:s.kind)==="FETCH"){let e=i.value.data,t=e5(e.tags||[]);t.some(e=>this.revalidatedTags.includes(e))&&(i=void 0)}return i||null}async set(e,t,r,n,s){if(r){if(Date.now()<ts){this.debug&&console.log("rate limited");return}if(null==a||a.set(e,{value:t,lastModified:Date.now()}),this.cacheEndpoint)try{let r=Date.now();null!==t&&"revalidate"in t&&(this.headers["x-vercel-revalidate"]=t.revalidate.toString()),!this.headers["x-vercel-revalidate"]&&null!==t&&"data"in t&&(this.headers["x-vercel-cache-control"]=t.data.headers["cache-control"]);let a=JSON.stringify(t),i={...this.headers};null!==t&&"data"in t&&t.data.tags&&(i["x-vercel-cache-tags"]=t.data.tags.join(",")),this.debug&&console.log("set cache",e,{tags:i["x-vercel-cache-tags"]});let o=await fetch(`${this.cacheEndpoint}/v1/suspense-cache/${e}`,{method:"POST",headers:{...i,"X-Vercel-Cache-Item-Name":n||""},body:a,next:{internal:!0,fetchType:"cache-set",fetchUrl:n,fetchIdx:s}});if(429===o.status){let e=o.headers.get("retry-after")||"60000";ts=Date.now()+parseInt(e)}if(!o.ok)throw this.debug&&console.log(await o.text()),Error(`invalid response ${o.status}`);this.debug&&console.log(`successfully set to fetch-cache for ${e}, duration: ${Date.now()-r}ms, size: ${a.length}`)}catch(e){this.debug&&console.error("Failed to update fetch cache",e)}}}}var ti=r(135);function to(e){return new TextEncoder().encode(e)}function tl(e){return e.replace(/\/$/,"").replace(/\/index$/,"")||"/"}class tc{constructor({fs:e,dev:t,appDir:r,flushToDisk:n,fetchCache:s,minimalMode:a,serverDistDir:i,requestHeaders:o,requestProtocol:l,maxMemoryCacheSize:c,getPrerenderManifest:u,fetchCacheKeyPrefix:h,CurCacheHandler:d,allowedRevalidateHeaderKeys:f}){var p,g,m,v;this.locks=new Map,this.unlocks=new Map;let y=!!process.env.NEXT_PRIVATE_DEBUG_CACHE;d?y&&console.log("using custom cache handler",d.name):(e&&i&&(y&&console.log("using filesystem cache handler"),d=e8),ta.isAvailable({_requestHeaders:o})&&a&&s&&(y&&console.log("using fetch cache handler"),d=ta)),process.env.__NEXT_TEST_MAX_ISR_CACHE&&(c=parseInt(process.env.__NEXT_TEST_MAX_ISR_CACHE,10)),this.dev=t,this.minimalMode=a,this.requestHeaders=o,this.requestProtocol=l,this.allowedRevalidateHeaderKeys=f,this.prerenderManifest=u(),this.fetchCacheKeyPrefix=h;let w=[];o[eJ]===(null==(p=this.prerenderManifest)?void 0:null==(g=p.preview)?void 0:g.previewModeId)&&(this.isOnDemandRevalidate=!0),a&&"string"==typeof o["x-next-revalidated-tags"]&&o["x-next-revalidate-tag-token"]===(null==(m=this.prerenderManifest)?void 0:null==(v=m.preview)?void 0:v.previewModeId)&&(w=o["x-next-revalidated-tags"].split(",")),d&&(this.cacheHandler=new d({dev:t,fs:e,flushToDisk:n,serverDistDir:i,revalidatedTags:w,maxMemoryCacheSize:c,_appDir:!!r,_requestHeaders:o,fetchCacheKeyPrefix:h}))}calculateRevalidate(e,t,r){if(r)return new Date().getTime()-1e3;let{initialRevalidateSeconds:n}=this.prerenderManifest.routes[tl(e)]||{initialRevalidateSeconds:1};return"number"==typeof n?1e3*n+t:n}_getPathname(e,t){return t?e:tn(e)}async unlock(e){let t=this.unlocks.get(e);t&&(t(),this.locks.delete(e),this.unlocks.delete(e))}async lock(e){process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY;let t=()=>Promise.resolve(),r=this.locks.get(e);if(r)await r;else{let r=new Promise(e=>{t=async()=>{e()}});this.locks.set(e,r),this.unlocks.set(e,t)}return t}async revalidateTag(e){var t;return process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,null==(t=this.cacheHandler)?void 0:null==t.revalidateTag?void 0:t.revalidateTag(e)}async fetchCacheKey(e,t={}){let r;let n=[];if(t.body){if("function"==typeof t.body.getReader){let e=t.body,r=e.getReader(),s=new Uint8Array;await r.read().then(function e({done:t,value:a}){if(!t){if(a)try{n.push("string"==typeof a?a:(0,ti.encode)(a));let e="string"==typeof a?to(a):new Uint8Array(a),t=s;(s=new Uint8Array(t.byteLength+e.byteLength)).set(t),s.set(e,t.byteLength)}catch(e){console.error(e)}r.read().then(e)}}),t._ogBody=s}else if("function"==typeof t.body.keys){let e=t.body;for(let r of(t._ogBody=t.body,new Set([...e.keys()]))){let t=e.getAll(r);n.push(`${r}=${(await Promise.all(t.map(async e=>"string"==typeof e?e:await e.text()))).join(",")}`)}}else if("function"==typeof t.body.arrayBuffer){let e=t.body,r=await e.arrayBuffer();n.push((0,ti.encode)(await t.body.arrayBuffer())),t._ogBody=new Blob([r],{type:e.type})}else"string"==typeof t.body&&(n.push(t.body),t._ogBody=t.body)}let s=JSON.stringify(["v3",this.fetchCacheKeyPrefix||"",e,t.method,"function"==typeof(t.headers||{}).keys?Object.fromEntries(t.headers):t.headers,t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity,t.cache,n]);{var a;let e=to(s);a=await crypto.subtle.digest("SHA-256",e),r=Array.prototype.map.call(new Uint8Array(a),e=>e.toString(16).padStart(2,"0")).join("")}return r}async get(e,t,r,n,s){var a,i,o;let l,c;if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,this.dev&&(!t||"no-cache"===this.requestHeaders["cache-control"]))return null;e=this._getPathname(e,t);let u=null,h=await (null==(a=this.cacheHandler)?void 0:a.get(e,t,n,s));if((null==h?void 0:null==(i=h.value)?void 0:i.kind)==="FETCH"){r=r||h.value.revalidate;let e=Math.round((Date.now()-(h.lastModified||0))/1e3),t=e>r,n=h.value.data;return{isStale:t,value:{kind:"FETCH",data:n,revalidate:r},revalidateAfter:Date.now()+1e3*r}}let d=null==(o=this.prerenderManifest.routes[tl(e)])?void 0:o.initialRevalidateSeconds;return(null==h?void 0:h.lastModified)===-1?(l=-1,c=-31536e3):l=!!(!1!==(c=this.calculateRevalidate(e,(null==h?void 0:h.lastModified)||Date.now(),this.dev&&!t))&&c<Date.now())||void 0,h&&(u={isStale:l,curRevalidate:d,revalidateAfter:c,value:h.value}),!h&&this.prerenderManifest.notFoundRoutes.includes(e)&&(u={isStale:l,value:null,curRevalidate:d,revalidateAfter:c},this.set(e,u.value,d,t,n,s)),u}async set(e,t,r,n,s,a){if(process.env.__NEXT_INCREMENTAL_CACHE_IPC_PORT&&process.env.__NEXT_INCREMENTAL_CACHE_IPC_KEY,!this.dev||n){if(n&&JSON.stringify(t).length>2097152){if(this.dev)throw Error("fetch for over 2MB of data can not be cached");return}e=this._getPathname(e,n);try{var i;void 0===r||n||(this.prerenderManifest.routes[e]={dataRoute:e6().posix.join("/_next/data",`${tn(e)}.json`),srcRoute:null,initialRevalidateSeconds:r}),await (null==(i=this.cacheHandler)?void 0:i.set(e,t,n,s,a))}catch(t){console.warn("Failed to update prerender cache for",e,t)}}}}let tu=["(..)(..)","(.)","(..)","(...)"],th=/[|\\{}()[\]^$+*?.-]/,td=/[|\\{}()[\]^$+*?.-]/g;function tf(e){return th.test(e)?e.replace(td,"\\$&"):e}function tp(e){let t=e.startsWith("[")&&e.endsWith("]");t&&(e=e.slice(1,-1));let r=e.startsWith("...");return r&&(e=e.slice(3)),{key:e,repeat:r,optional:t}}class tg{constructor(e){var t;this.definition=e,t=e.pathname,te.test(t)&&(this.dynamic=function(e){let{re:t,groups:r}=e;return e=>{let n=t.exec(e);if(!n)return!1;let s=e=>{try{return decodeURIComponent(e)}catch(e){throw new tr("failed to decode param")}},a={};return Object.keys(r).forEach(e=>{let t=r[e],i=n[t.pos];void 0!==i&&(a[e]=~i.indexOf("/")?i.split("/").map(e=>s(e)):t.repeat?[s(i)]:s(i))}),a}}(function(e){let{parameterizedRoute:t,groups:r}=function(e){let t=ex(e).slice(1).split("/"),r={},n=1;return{parameterizedRoute:t.map(e=>{let t=tu.find(t=>e.startsWith(t)),s=e.match(/\[((?:\[.*\])|.+)\]/);if(t&&s){let{key:e,optional:a,repeat:i}=tp(s[1]);return r[e]={pos:n++,repeat:i,optional:a},"/"+tf(t)+"([^/]+?)"}if(!s)return"/"+tf(e);{let{key:e,repeat:t,optional:a}=tp(s[1]);return r[e]={pos:n++,repeat:t,optional:a},t?a?"(?:/(.+?))?":"/(.+?)":"/([^/]+?)"}}).join(""),groups:r}}(e);return{re:RegExp("^"+t+"(?:/)?$"),groups:r}}(e.pathname)))}get identity(){return this.definition.pathname}get isDynamic(){return void 0!==this.dynamic}match(e){let t=this.test(e);return t?{definition:this.definition,params:t.params}:null}test(e){if(this.dynamic){let t=this.dynamic(e);return t?{params:t}:null}return e===this.definition.pathname?{}:null}}class tm{constructor(e){this.routeModule=e,this.matcher=new tg(e.definition)}static wrap(e,t={}){let r=new tm(e);return e=>e2({...e,...t,IncrementalCache:tc,handler:r.handler.bind(r)})}async handler(e){let t=ex(new URL(e.url).pathname),{basePath:r}=e.nextUrl;r&&(t=eA(t,r));let n=this.matcher.match(t);if(!n)throw Error(`Invariant: no match found for request. Pathname '${t}' should have matched '${this.matcher.definition.pathname}'`);let s="string"==typeof self.__PRERENDER_MANIFEST?JSON.parse(self.__PRERENDER_MANIFEST):void 0,a={params:n.params,prerenderManifest:{version:4,routes:{},dynamicRoutes:{},preview:(null==s?void 0:s.preview)||{previewModeEncryptionKey:"",previewModeId:"development-id",previewModeSigningKey:""},notFoundRoutes:[]},staticGenerationContext:{supportsDynamicHTML:!0}};return await this.routeModule.handle(e,a)}}r(996);class tv{constructor({userland:e,definition:t}){this.userland=e,this.definition=t}}let ty={wrap(e,{pathname:t,renderOpts:r},n){let s=!r.supportsDynamicHTML&&!r.isDraftMode,a={isStaticGeneration:s,pathname:t,originalPathname:r.originalPathname,incrementalCache:r.incrementalCache||globalThis.__incrementalCache,isRevalidate:r.isRevalidate,isPrerendering:r.nextExport,fetchCache:r.fetchCache,isOnDemandRevalidate:r.isOnDemandRevalidate,isDraftMode:r.isDraftMode};return r.store=a,e.run(a,n,a)}};function tw(){return new Response(null,{status:400})}function t_(){return new Response(null,{status:405})}let tb=["GET","HEAD","OPTIONS","POST","PUT","DELETE","PATCH"];!function(e){e.handleRequest="BaseServer.handleRequest",e.run="BaseServer.run",e.pipe="BaseServer.pipe",e.getStaticHTML="BaseServer.getStaticHTML",e.render="BaseServer.render",e.renderToResponseWithComponents="BaseServer.renderToResponseWithComponents",e.renderToResponse="BaseServer.renderToResponse",e.renderToHTML="BaseServer.renderToHTML",e.renderError="BaseServer.renderError",e.renderErrorToResponse="BaseServer.renderErrorToResponse",e.renderErrorToHTML="BaseServer.renderErrorToHTML",e.render404="BaseServer.render404"}(y||(y={})),function(e){e.loadDefaultErrorComponents="LoadComponents.loadDefaultErrorComponents",e.loadComponents="LoadComponents.loadComponents"}(w||(w={})),function(e){e.getRequestHandler="NextServer.getRequestHandler",e.getServer="NextServer.getServer",e.getServerRequestHandler="NextServer.getServerRequestHandler",e.createServer="createServer.createServer"}(_||(_={})),function(e){e.compression="NextNodeServer.compression",e.getBuildId="NextNodeServer.getBuildId",e.generateStaticRoutes="NextNodeServer.generateStaticRoutes",e.generateFsStaticRoutes="NextNodeServer.generateFsStaticRoutes",e.generatePublicRoutes="NextNodeServer.generatePublicRoutes",e.generateImageRoutes="NextNodeServer.generateImageRoutes.route",e.sendRenderResult="NextNodeServer.sendRenderResult",e.sendStatic="NextNodeServer.sendStatic",e.proxyRequest="NextNodeServer.proxyRequest",e.runApi="NextNodeServer.runApi",e.render="NextNodeServer.render",e.renderHTML="NextNodeServer.renderHTML",e.imageOptimizer="NextNodeServer.imageOptimizer",e.getPagePath="NextNodeServer.getPagePath",e.getRoutesManifest="NextNodeServer.getRoutesManifest",e.findPageComponents="NextNodeServer.findPageComponents",e.getFontManifest="NextNodeServer.getFontManifest",e.getServerComponentManifest="NextNodeServer.getServerComponentManifest",e.getRequestHandler="NextNodeServer.getRequestHandler",e.renderToHTML="NextNodeServer.renderToHTML",e.renderError="NextNodeServer.renderError",e.renderErrorToHTML="NextNodeServer.renderErrorToHTML",e.render404="NextNodeServer.render404",e.route="route",e.onProxyReq="onProxyReq",e.apiResolver="apiResolver",e.internalFetch="internalFetch"}(b||(b={})),(x||(x={})).startServer="startServer.startServer",function(e){e.getServerSideProps="Render.getServerSideProps",e.getStaticProps="Render.getStaticProps",e.renderToString="Render.renderToString",e.renderDocument="Render.renderDocument",e.createBodyResult="Render.createBodyResult"}(S||(S={})),function(e){e.renderToString="AppRender.renderToString",e.renderToReadableStream="AppRender.renderToReadableStream",e.getBodyResult="AppRender.getBodyResult",e.fetch="AppRender.fetch"}(E||(E={})),(P||(P={})).executeRoute="Router.executeRoute",(C||(C={})).runHandler="Node.runHandler",(A||(A={})).runHandler="AppRouteRouteHandlers.runHandler",(T||(T={})).generateMetadata="ResolveMetadata.generateMetadata";let tx=["BaseServer.handleRequest","Render.getServerSideProps","Render.getStaticProps","AppRender.fetch","AppRender.getBodyResult","Render.renderDocument","Node.runHandler","AppRouteRouteHandlers.runHandler","ResolveMetadata.generateMetadata"];i=r(49);let{context:tS,trace:tE,SpanStatusCode:tP,SpanKind:tC}=i,tA=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then,tT=(e,t)=>{t&&e.recordException(t),e.setStatus({code:tP.ERROR,message:null==t?void 0:t.message}),e.end()},tR=new Map,tO=i.createContextKey("next.rootSpanId"),tN=0,tI=()=>tN++;class tM{getTracerInstance(){return tE.getTracer("next.js","0.0.1")}getContext(){return tS}getActiveScopeSpan(){return tE.getSpan(null==tS?void 0:tS.active())}trace(...e){let[t,r,n]=e,{fn:s,options:a}="function"==typeof r?{fn:r,options:{}}:{fn:n,options:{...r}};if(!tx.includes(t)&&"1"!==process.env.NEXT_OTEL_VERBOSE||a.hideSpan)return s();let o=a.spanName??t,l=this.getSpanContext((null==a?void 0:a.parentSpan)??this.getActiveScopeSpan()),c=!1;l||(l=i.ROOT_CONTEXT,c=!0);let u=tI();return a.attributes={"next.span_name":o,"next.span_type":t,...a.attributes},i.context.with(l.setValue(tO,u),()=>this.getTracerInstance().startActiveSpan(o,a,e=>{let t=()=>{tR.delete(u)};c&&tR.set(u,new Map(Object.entries(a.attributes??{})));try{if(s.length>1)return s(e,t=>tT(e,t));let r=s(e);return tA(r)?r.then(()=>e.end(),t=>tT(e,t)).finally(t):(e.end(),t()),r}catch(r){throw tT(e,r),t(),r}}))}wrap(...e){let t=this,[r,n,s]=3===e.length?e:[e[0],{},e[1]];return tx.includes(r)||"1"===process.env.NEXT_OTEL_VERBOSE?function(){let e=n;"function"==typeof e&&"function"==typeof s&&(e=e.apply(this,arguments));let a=arguments.length-1,i=arguments[a];if("function"!=typeof i)return t.trace(r,e,()=>s.apply(this,arguments));{let n=t.getContext().bind(tS.active(),i);return t.trace(r,e,(e,t)=>(arguments[a]=function(e){return null==t||t(e),n.apply(this,arguments)},s.apply(this,arguments)))}}:s}startSpan(...e){let[t,r]=e,n=this.getSpanContext((null==r?void 0:r.parentSpan)??this.getActiveScopeSpan());return this.getTracerInstance().startSpan(t,r,n)}getSpanContext(e){let t=e?tE.setSpan(tS.active(),e):void 0;return t}getRootSpanAttributes(){let e=tS.active().getValue(tO);return tR.get(e)}}let tk=(()=>{let e=new tM;return()=>e})();var tD=r(195).Buffer;function tL(e){let t=[],r=null==e?void 0:e.originalPathname;return r&&(Array.isArray(e.tags)||(e.tags=[]),e.tags.includes(r)||e.tags.push(r),t.push(r)),t}function tj(e,t){if(!e)return;e.fetchMetrics||(e.fetchMetrics=[]);let r=["url","status","method"];e.fetchMetrics.some(e=>r.every(r=>e[r]===t[r]))||e.fetchMetrics.push({url:t.url,cacheStatus:t.cacheStatus,cacheReason:t.cacheReason,status:t.status,method:t.method,start:t.start,end:Date.now(),idx:e.nextFetchId||0})}var t$=r(928);function tB(e){let t=new URL(e);return t.host="localhost:3000",t.search="",t.protocol="http",t.toString()}function tU(e){if("string"!=typeof(null==e?void 0:e.digest))return!1;let[t,r,n]=e.digest.split(";",3);return"NEXT_REDIRECT"===t&&("replace"===r||"push"===r)&&"string"==typeof n}!function(e){e.push="push",e.replace="replace"}(R||(R={})),(o=r(803).Z).cyan("wait"),o.red("error"),o.yellow("warn"),o.green("ready"),o.cyan("info"),o.magenta("event"),o.magenta("trace");let tH=["HEAD","OPTIONS"],tq=["OPTIONS","POST","PUT","DELETE","PATCH"];!function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(O||(O={}));let{requestAsyncStorage:tF}=r(533),{staticGenerationAsyncStorage:tG}=r(948),tV=r(721),tW=r(926),{staticGenerationBailout:tJ}=r(766),{actionAsyncStorage:tK}=r(430),tX="4.24.2",tz=!1;class tY{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}c||function(e,t={auto:!1}){if(tz)throw Error(`you must \`import 'openai/shims/${e.kind}'\` before importing anything else from openai`);if(c)throw Error(`can't \`import 'openai/shims/${e.kind}'\` after \`import 'openai/shims/${c}'\``);tz=t.auto,c=e.kind,u=e.fetch,e.Request,e.Response,e.Headers,h=e.FormData,e.Blob,d=e.File,f=e.ReadableStream,p=e.getMultipartRequestOptions,g=e.getDefaultAgent,m=e.fileFromPath,v=e.isFsReadStream}(function({manuallyImported:e}={}){let t,r,n,s;let a=e?"You may need to use polyfills":`Add one of these imports before your first \`import … from 'openai'\`:
- \`import 'openai/shims/node'\` (if you're running on Node)
- \`import 'openai/shims/web'\` (otherwise)
`;try{t=fetch,r=Request,n=Response,s=Headers}catch(e){throw Error(`this environment is missing the following Web Fetch API type: ${e.message}. ${a}`)}return{kind:"web",fetch:t,Request:r,Response:n,Headers:s,FormData:"undefined"!=typeof FormData?FormData:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${a}`)}},Blob:"undefined"!=typeof Blob?Blob:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${a}`)}},File:"undefined"!=typeof File?File:class{constructor(){throw Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${a}`)}},ReadableStream:"undefined"!=typeof ReadableStream?ReadableStream:class{constructor(){throw Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${a}`)}},getMultipartRequestOptions:async(e,t)=>({...t,body:new tY(e)}),getDefaultAgent:e=>void 0,fileFromPath:()=>{throw Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")},isFsReadStream:e=>!1}}(),{auto:!0});class tQ extends Error{}class tZ extends tQ{constructor(e,t,r,n){super(`${tZ.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.error=t,this.code=t?.code,this.param=t?.param,this.type=t?.type}static makeMessage(e,t,r){let n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e)return new t1({cause:rB(t)});let s=t?.error;return 400===e?new t2(e,s,r,n):401===e?new t3(e,s,r,n):403===e?new t7(e,s,r,n):404===e?new t9(e,s,r,n):409===e?new t6(e,s,r,n):422===e?new t5(e,s,r,n):429===e?new t8(e,s,r,n):e>=500?new re(e,s,r,n):new tZ(e,s,r,n)}}class t0 extends tZ{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}}class t1 extends tZ{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}class t4 extends t1{constructor({message:e}={}){super({message:e??"Request timed out."})}}class t2 extends tZ{constructor(){super(...arguments),this.status=400}}class t3 extends tZ{constructor(){super(...arguments),this.status=401}}class t7 extends tZ{constructor(){super(...arguments),this.status=403}}class t9 extends tZ{constructor(){super(...arguments),this.status=404}}class t6 extends tZ{constructor(){super(...arguments),this.status=409}}class t5 extends tZ{constructor(){super(...arguments),this.status=422}}class t8 extends tZ{constructor(){super(...arguments),this.status=429}}class re extends tZ{}var rt=r(195).Buffer;class rr{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1,n=new rn;async function*s(){if(!e.body)throw t.abort(),new tQ("Attempted to iterate over a response with no body");let r=new rs,s=ra(e.body);for await(let e of s)for(let t of r.decode(e)){let e=n.decode(t);e&&(yield e)}for(let e of r.flush()){let t=n.decode(e);t&&(yield t)}}async function*a(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of s())if(!e){if(t.data.startsWith("[DONE]")){e=!0;continue}if(null===t.event){let e;try{e=JSON.parse(t.data)}catch(e){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),e}if(e&&e.error)throw new tZ(void 0,e.error,void 0,void 0);yield e}}e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}}return new rr(a,t)}static fromReadableStream(e,t){let r=!1;async function*n(){let t=new rs,r=ra(e);for await(let e of r)for(let r of t.decode(e))yield r;for(let e of t.flush())yield e}async function*s(){if(r)throw Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let e=!1;try{for await(let t of n())!e&&t&&(yield JSON.parse(t));e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||t.abort()}}return new rr(s,t)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){let n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new rr(()=>n(e),this.controller),new rr(()=>n(t),this.controller)]}toReadableStream(){let e;let t=this,r=new TextEncoder;return new f({async start(){e=t[Symbol.asyncIterator]()},async pull(t){try{let{value:n,done:s}=await e.next();if(s)return t.close();let a=r.encode(JSON.stringify(n)+"\n");t.enqueue(a)}catch(e){t.error(e)}},async cancel(){await e.return?.()}})}}class rn{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){let r=e.indexOf(t);return -1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class rs{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];let r=rs.NEWLINE_CHARS.has(t[t.length-1]||""),n=t.split(rs.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){if(null==e)return"";if("string"==typeof e)return e;if(void 0!==rt){if(e instanceof rt)return e.toString();if(e instanceof Uint8Array)return rt.from(e).toString();throw new tQ(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return this.textDecoder??(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new tQ(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new tQ("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];let e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}function ra(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){let e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}rs.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","\x1c","\x1d","\x1e","\x85","\u2028","\u2029"]),rs.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g;var ri=r(195).Buffer;let ro=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,rl=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&rc(e),rc=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,ru=e=>rl(e)||ro(e)||v(e);async function rh(e,t,r={}){var n;if(ro(e=await e)){let n=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()??"unknown_file"),new d([n],t,r)}let s=await rd(e);if(t||(t=(rf((n=e).name)||rf(n.filename)||rf(n.path)?.split(/[\\/]/).pop())??"unknown_file"),!r.type){let e=s[0]?.type;"string"==typeof e&&(r={...r,type:e})}return new d(s,t,r)}async function rd(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(rc(e))t.push(await e.arrayBuffer());else if(rp(e))for await(let r of e)t.push(r);else throw Error(`Unexpected data type: ${typeof e}; constructor: ${e?.constructor?.name}; props: ${function(e){let t=Object.getOwnPropertyNames(e);return`[${t.map(e=>`"${e}"`).join(", ")}]`}(e)}`);return t}let rf=e=>"string"==typeof e?e:void 0!==ri&&e instanceof ri?String(e):void 0,rp=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],rg=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],rm=async e=>{let t=await rv(e.body);return p(t,e)},rv=async e=>{let t=new h;return await Promise.all(Object.entries(e||{}).map(([e,r])=>ry(t,e,r))),t},ry=async(e,t,r)=>{if(void 0!==r){if(null==r)throw TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(ru(r)){let n=await rh(r);e.append(t,n)}else if(Array.isArray(r))await Promise.all(r.map(r=>ry(e,t+"[]",r)));else if("object"==typeof r)await Promise.all(Object.entries(r).map(([r,n])=>ry(e,`${t}[${r}]`,n)));else throw TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`)}};var rw=r(195).Buffer,r_=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},rb=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};async function rx(e){let{response:t}=e;if(e.options.stream)return rG("response",t.status,t.url,t.headers,t.body),rr.fromSSEResponse(t,e.controller);if(204===t.status)return null;if(e.options.__binaryResponse)return t;let r=t.headers.get("content-type");if(r?.includes("application/json")){let e=await t.json();return rG("response",t.status,t.url,t.headers,e),e}let n=await t.text();return rG("response",t.status,t.url,t.headers,n),n}class rS extends Promise{constructor(e,t=rx){super(e=>{e(null)}),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new rS(this.responsePromise,async t=>e(await this.parseResponse(t)))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}class rE{constructor({baseURL:e,maxRetries:t=2,timeout:r=6e5,httpAgent:n,fetch:s}){this.baseURL=e,this.maxRetries=r$("maxRetries",t),this.timeout=r$("timeout",r),this.httpAgent=n,this.fetch=s??u}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...rM(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${rV()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if(void 0!==rw)return rw.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder){let t=new TextEncoder,r=t.encode(e);return r.length.toString()}}return null}buildRequest(e){let{method:t,path:r,query:n,headers:s={}}=e,a=rg(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,i=this.calculateContentLength(a),o=this.buildURL(r,n);"timeout"in e&&r$("timeout",e.timeout);let l=e.timeout??this.timeout,c=e.httpAgent??this.httpAgent??g(o),u=l+1e3;"number"==typeof c?.options?.timeout&&u>(c.options.timeout??0)&&(c.options.timeout=u),this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);let h=this.buildHeaders({options:e,headers:s,contentLength:i}),d={method:t,...a&&{body:a},headers:h,...c&&{agent:c},signal:e.signal??null};return{req:d,url:o,timeout:l}}buildHeaders({options:e,headers:t,contentLength:r}){let n={};r&&(n["content-length"]=r);let s=this.defaultHeaders(e);return rF(n,s),rF(n,t),rg(e.body)&&"node"!==c&&delete n["content-type"],this.validateHeaders(n,t),n}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map(e=>[...e])):{...e}:{}}makeStatusError(e,t,r,n){return tZ.generate(e,t,r,n)}request(e,t=null){return new rS(this.makeRequest(e,t))}async makeRequest(e,t){let r=await e;null==t&&(t=r.maxRetries??this.maxRetries);let{req:n,url:s,timeout:a}=this.buildRequest(r);if(await this.prepareRequest(n,{url:s,options:r}),rG("request",s,r,n.headers),r.signal?.aborted)throw new t0;let i=new AbortController,o=await this.fetchWithTimeout(s,n,a,i).catch(rB);if(o instanceof Error){if(r.signal?.aborted)throw new t0;if(t)return this.retryRequest(r,t);if("AbortError"===o.name)throw new t4;throw new t1({cause:o})}let l=rA(o.headers);if(!o.ok){if(t&&this.shouldRetry(o))return this.retryRequest(r,t,l);let e=await o.text().catch(e=>rB(e).message),n=rk(e),a=n?void 0:e;rG("response",o.status,s,l,a);let i=this.makeStatusError(o.status,n,a,l);throw i}return{response:o,options:r,controller:i}}requestAPIList(e,t){let r=this.makeRequest(t,null);return new rC(this,r,e)}buildURL(e,t){let r=new URL(rL(e)?e:this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return rH(n)||(t={...n,...t}),t&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter(([e,t])=>void 0!==t).map(([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new tQ(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}async fetchWithTimeout(e,t,r,n){let{signal:s,...a}=t||{};s&&s.addEventListener("abort",()=>n.abort());let i=setTimeout(()=>n.abort(),r);return this.getRequestClient().fetch.call(void 0,e,{signal:n.signal,...a}).finally(()=>{clearTimeout(i)})}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){let t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){let n;let s=r?.["retry-after"];if(s){let e=parseInt(s);n=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!n||!Number.isInteger(n)||n<=0||n>6e4){let r=e.maxRetries??this.maxRetries;n=this.calculateDefaultRetryTimeoutMillis(t,r)}return await rj(n),this.makeRequest(e,t-1)}calculateDefaultRetryTimeoutMillis(e,t){return Math.min(.5*Math.pow(2,t-e),8)*(1-.25*Math.random())*1e3}getUserAgent(){return`${this.constructor.name}/JS ${tX}`}}class rP{constructor(e,t,r,n){N.set(this,void 0),r_(this,N,e,"f"),this.options=n,this.response=t,this.body=r}hasNextPage(){let e=this.getPaginatedItems();return!!e.length&&null!=this.nextPageInfo()}async getNextPage(){let e=this.nextPageInfo();if(!e)throw new tQ("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");let t={...this.options};if("params"in e&&"object"==typeof t.query)t.query={...t.query,...e.params};else if("url"in e){let r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(let[t,n]of r)e.url.searchParams.set(t,n);t.query=void 0,t.path=e.url.toString()}return await rb(this,N,"f").requestAPIList(this.constructor,t)}async *iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async *[(N=new WeakMap,Symbol.asyncIterator)](){for await(let e of this.iterPages())for(let t of e.getPaginatedItems())yield t}}class rC extends rS{constructor(e,t,r){super(t,async t=>new r(e,t.response,await rx(t),t.options))}async *[Symbol.asyncIterator](){let e=await this;for await(let t of e)yield t}}let rA=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){let r=t.toString();return e[r.toLowerCase()]||e[r]}}),rT={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0,__binaryResponse:!0},rR=e=>"object"==typeof e&&null!==e&&!rH(e)&&Object.keys(e).every(e=>rq(rT,e)),rO=()=>"undefined"!=typeof Deno&&null!=Deno.build?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tX,"X-Stainless-OS":rI(Deno.build.os),"X-Stainless-Arch":rN(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":tX,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"other:edge-runtime","X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version},rN=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",rI=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown",rM=()=>l??(l=rO()),rk=e=>{try{return JSON.parse(e)}catch(e){return}},rD=RegExp("^(?:[a-z]+:)?//","i"),rL=e=>rD.test(e),rj=e=>new Promise(t=>setTimeout(t,e)),r$=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new tQ(`${e} must be an integer`);if(t<0)throw new tQ(`${e} must be a positive integer`);return t},rB=e=>e instanceof Error?e:Error(e),rU=e=>"undefined"!=typeof process?process.env?.[e]??void 0:"undefined"!=typeof Deno?Deno.env?.get?.(e):void 0;function rH(e){if(!e)return!0;for(let t in e)return!1;return!0}function rq(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function rF(e,t){for(let r in t){if(!rq(t,r))continue;let n=r.toLowerCase();if(!n)continue;let s=t[r];null===s?delete e[n]:void 0!==s&&(e[n]=s)}}function rG(e,...t){"undefined"!=typeof process&&"true"===process.env.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}let rV=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),rW=()=>!1;class rJ extends rP{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageParams(){return null}nextPageInfo(){return null}}class rK extends rP{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[]}getPaginatedItems(){return this.data??[]}nextPageParams(){let e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;let t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){let e=this.getPaginatedItems();if(!e.length)return null;let t=e[e.length-1]?.id;return t?{params:{after:t}}:null}}class rX{constructor(e){this._client=e}}class rz extends rX{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}rz||(rz={});class rY extends rX{create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}}rY||(rY={});class rQ extends rX{constructor(){super(...arguments),this.completions=new rY(this._client)}}(rQ||(rQ={})).Completions=rY;class rZ extends rX{create(e,t){return this._client.post("/edits",{body:e,...t})}}rZ||(rZ={});class r0 extends rX{create(e,t){return this._client.post("/embeddings",{body:e,...t})}}r0||(r0={});class r1 extends rX{create(e,t){return this._client.post("/files",rm({body:e,...t}))}retrieve(e,t){return this._client.get(`/files/${e}`,t)}list(e={},t){return rR(e)?this.list({},e):this._client.getAPIList("/files",r4,{query:e,...t})}del(e,t){return this._client.delete(`/files/${e}`,t)}content(e,t){return this._client.get(`/files/${e}/content`,{...t,__binaryResponse:!0})}retrieveContent(e,t){return this._client.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...t?.headers}})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){let n=new Set(["processed","error","deleted"]),s=Date.now(),a=await this.retrieve(e);for(;!a.status||!n.has(a.status);)if(await rj(t),a=await this.retrieve(e),Date.now()-s>r)throw new t4({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return a}}class r4 extends rJ{}(r1||(r1={})).FileObjectsPage=r4;class r2 extends rX{createVariation(e,t){return this._client.post("/images/variations",rm({body:e,...t}))}edit(e,t){return this._client.post("/images/edits",rm({body:e,...t}))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}r2||(r2={});class r3 extends rX{create(e,t){return this._client.post("/audio/speech",{body:e,...t,__binaryResponse:!0})}}r3||(r3={});class r7 extends rX{create(e,t){return this._client.post("/audio/transcriptions",rm({body:e,...t}))}}r7||(r7={});class r9 extends rX{create(e,t){return this._client.post("/audio/translations",rm({body:e,...t}))}}r9||(r9={});class r6 extends rX{constructor(){super(...arguments),this.transcriptions=new r7(this._client),this.translations=new r9(this._client),this.speech=new r3(this._client)}}!function(e){e.Transcriptions=r7,e.Translations=r9,e.Speech=r3}(r6||(r6={}));class r5 extends rX{create(e,t){return this._client.post("/moderations",{body:e,...t})}}r5||(r5={});class r8 extends rX{retrieve(e,t){return this._client.get(`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",ne,e)}del(e,t){return this._client.delete(`/models/${e}`,t)}}class ne extends rJ{}(r8||(r8={})).ModelsPage=ne;class nt extends rX{create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return rR(e)?this.list({},e):this._client.getAPIList("/fine_tuning/jobs",nr,{query:e,...t})}cancel(e,t){return this._client.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return rR(t)?this.listEvents(e,{},t):this._client.getAPIList(`/fine_tuning/jobs/${e}/events`,nn,{query:t,...r})}}class nr extends rK{}class nn extends rK{}!function(e){e.FineTuningJobsPage=nr,e.FineTuningJobEventsPage=nn}(nt||(nt={}));class ns extends rX{constructor(){super(...arguments),this.jobs=new nt(this._client)}}!function(e){e.Jobs=nt,e.FineTuningJobsPage=nr,e.FineTuningJobEventsPage=nn}(ns||(ns={}));class na extends rX{create(e,t){return this._client.post("/fine-tunes",{body:e,...t})}retrieve(e,t){return this._client.get(`/fine-tunes/${e}`,t)}list(e){return this._client.getAPIList("/fine-tunes",ni,e)}cancel(e,t){return this._client.post(`/fine-tunes/${e}/cancel`,t)}listEvents(e,t,r){return this._client.get(`/fine-tunes/${e}/events`,{query:t,timeout:864e5,...r,stream:t?.stream??!1})}}class ni extends rJ{}(na||(na={})).FineTunesPage=ni;class no extends rX{create(e,t,r){return this._client.post(`/assistants/${e}/files`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/assistants/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e,t={},r){return rR(t)?this.list(e,{},t):this._client.getAPIList(`/assistants/${e}/files`,nl,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}del(e,t,r){return this._client.delete(`/assistants/${e}/files/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class nl extends rK{}(no||(no={})).AssistantFilesPage=nl;class nc extends rX{constructor(){super(...arguments),this.files=new no(this._client)}create(e,t){return this._client.post("/assistants",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,r){return this._client.post(`/assistants/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}list(e={},t){return rR(e)?this.list({},e):this._client.getAPIList("/assistants",nu,{query:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}del(e,t){return this._client.delete(`/assistants/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}class nu extends rK{}function nh(e){return"function"==typeof e.parse}!function(e){e.AssistantsPage=nu,e.Files=no,e.AssistantFilesPage=nl}(nc||(nc={}));let nd=e=>e?.role==="assistant",nf=e=>e?.role==="function",np=e=>e?.role==="tool";var ng=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r},nm=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};class nv{constructor(){I.add(this),this.controller=new AbortController,M.set(this,void 0),k.set(this,()=>{}),D.set(this,()=>{}),L.set(this,void 0),j.set(this,()=>{}),$.set(this,()=>{}),B.set(this,{}),this._chatCompletions=[],this.messages=[],U.set(this,!1),H.set(this,!1),q.set(this,!1),F.set(this,!1),X.set(this,e=>{if(ng(this,H,!0,"f"),e instanceof Error&&"AbortError"===e.name&&(e=new t0),e instanceof t0)return ng(this,q,!0,"f"),this._emit("abort",e);if(e instanceof tQ)return this._emit("error",e);if(e instanceof Error){let t=new tQ(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new tQ(String(e)))}),ng(this,M,new Promise((e,t)=>{ng(this,k,e,"f"),ng(this,D,t,"f")}),"f"),ng(this,L,new Promise((e,t)=>{ng(this,j,e,"f"),ng(this,$,t,"f")}),"f"),nm(this,M,"f").catch(()=>{}),nm(this,L,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},nm(this,X,"f"))},0)}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);let t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t){if(this._emit("message",e),(nf(e)||np(e))&&e.content)this._emit("functionCallResult",e.content);else if(nd(e)&&e.function_call)this._emit("functionCall",e.function_call);else if(nd(e)&&e.tool_calls)for(let t of e.tool_calls)"function"===t.type&&this._emit("functionCall",t.function)}}_connected(){this.ended||(nm(this,k,"f").call(this),this._emit("connect"))}get ended(){return nm(this,U,"f")}get errored(){return nm(this,H,"f")}get aborted(){return nm(this,q,"f")}abort(){this.controller.abort()}on(e,t){let r=nm(this,B,"f")[e]||(nm(this,B,"f")[e]=[]);return r.push({listener:t}),this}off(e,t){let r=nm(this,B,"f")[e];if(!r)return this;let n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){let r=nm(this,B,"f")[e]||(nm(this,B,"f")[e]=[]);return r.push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{ng(this,F,!0,"f"),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){ng(this,F,!0,"f"),await nm(this,L,"f")}async finalChatCompletion(){await this.done();let e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new tQ("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),nm(this,I,"m",G).call(this)}async finalMessage(){return await this.done(),nm(this,I,"m",V).call(this)}async finalFunctionCall(){return await this.done(),nm(this,I,"m",W).call(this)}async finalFunctionCallResult(){return await this.done(),nm(this,I,"m",J).call(this)}async totalUsage(){return await this.done(),nm(this,I,"m",K).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emit(e,...t){if(nm(this,U,"f"))return;"end"===e&&(ng(this,U,!0,"f"),nm(this,j,"f").call(this));let r=nm(this,B,"f")[e];if(r&&(nm(this,B,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){let e=t[0];nm(this,F,"f")||r?.length||Promise.reject(e),nm(this,D,"f").call(this,e),nm(this,$,"f").call(this,e),this._emit("end");return}if("error"===e){let e=t[0];nm(this,F,"f")||r?.length||Promise.reject(e),nm(this,D,"f").call(this,e),nm(this,$,"f").call(this,e),this._emit("end")}}_emitFinal(){let e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);let t=nm(this,I,"m",V).call(this);t&&this._emit("finalMessage",t);let r=nm(this,I,"m",G).call(this);r&&this._emit("finalContent",r);let n=nm(this,I,"m",W).call(this);n&&this._emit("finalFunctionCall",n);let s=nm(this,I,"m",J).call(this);null!=s&&this._emit("finalFunctionCallResult",s),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",nm(this,I,"m",K).call(this))}async _createChatCompletion(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nm(this,I,"m",z).call(this,t);let s=await e.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(s)}async _runChatCompletion(e,t,r){for(let e of t.messages)this._addMessage(e,!1);return await this._createChatCompletion(e,t,r)}async _runFunctions(e,t,r){let n="function",{function_call:s="auto",stream:a,...i}=t,o="string"!=typeof s&&s?.name,{maxChatCompletions:l=10}=r||{},c={};for(let e of t.functions)c[e.name||e.function.name]=e;let u=t.functions.map(e=>({name:e.name||e.function.name,parameters:e.parameters,description:e.description}));for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t;let a=await this._createChatCompletion(e,{...i,function_call:s,functions:u,messages:[...this.messages]},r),l=a.choices[0]?.message;if(!l)throw new tQ("missing message in ChatCompletion response");if(!l.function_call)return;let{name:h,arguments:d}=l.function_call,f=c[h];if(f){if(o&&o!==h){let e=`Invalid function_call: ${JSON.stringify(h)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,name:h,content:e});continue}}else{let e=`Invalid function_call: ${JSON.stringify(h)}. Available options are: ${u.map(e=>JSON.stringify(e.name)).join(", ")}. Please try again`;this._addMessage({role:n,name:h,content:e});continue}try{t=nh(f)?await f.parse(d):d}catch(e){this._addMessage({role:n,name:h,content:e instanceof Error?e.message:String(e)});continue}let p=await f.function(t,this),g=nm(this,I,"m",Y).call(this,p);if(this._addMessage({role:n,name:h,content:g}),o)return}}async _runTools(e,t,r){let n="tool",{tool_choice:s="auto",stream:a,...i}=t,o="string"!=typeof s&&s?.function?.name,{maxChatCompletions:l=10}=r||{},c={};for(let e of t.tools)"function"===e.type&&(c[e.function.name||e.function.function.name]=e.function);let u="tools"in t?t.tools.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description}}:e):void 0;for(let e of t.messages)this._addMessage(e,!1);for(let t=0;t<l;++t){let t=await this._createChatCompletion(e,{...i,tool_choice:s,tools:u,messages:[...this.messages]},r),a=t.choices[0]?.message;if(!a)throw new tQ("missing message in ChatCompletion response");if(!a.tool_calls)break;for(let e of a.tool_calls){let t;if("function"!==e.type)continue;let r=e.id,{name:s,arguments:a}=e.function,i=c[s];if(i){if(o&&o!==s){let e=`Invalid tool_call: ${JSON.stringify(s)}. ${JSON.stringify(o)} requested. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}}else{let e=`Invalid tool_call: ${JSON.stringify(s)}. Available options are: ${u.map(e=>JSON.stringify(e.function.name)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:r,content:e});continue}try{t=nh(i)?await i.parse(a):a}catch(t){let e=t instanceof Error?t.message:String(t);this._addMessage({role:n,tool_call_id:r,content:e});continue}let l=await i.function(t,this),h=nm(this,I,"m",Y).call(this,l);if(this._addMessage({role:n,tool_call_id:r,content:h}),o)return}}}}M=new WeakMap,k=new WeakMap,D=new WeakMap,L=new WeakMap,j=new WeakMap,$=new WeakMap,B=new WeakMap,U=new WeakMap,H=new WeakMap,q=new WeakMap,F=new WeakMap,X=new WeakMap,I=new WeakSet,G=function(){return nm(this,I,"m",V).call(this).content??null},V=function(){let e=this.messages.length;for(;e-- >0;){let t=this.messages[e];if(nd(t))return{...t,content:t.content??null}}throw new tQ("stream ended without producing a ChatCompletionMessage with role=assistant")},W=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(nd(t)&&t?.function_call)return t.function_call;if(nd(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},J=function(){for(let e=this.messages.length-1;e>=0;e--){let t=this.messages[e];if(nf(t)&&null!=t.content||np(t)&&null!=t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},K=function(){let e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(let{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},z=function(e){if(null!=e.n&&e.n>1)throw new tQ("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},Y=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class ny extends nv{static runFunctions(e,t,r){let n=new ny,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,s)),n}static runTools(e,t,r){let n=new ny,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,s)),n}_addMessage(e){super._addMessage(e),nd(e)&&e.content&&this._emit("content",e.content)}}var nw=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},n_=function(e,t,r,n,s){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!s)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r};class nb extends nv{constructor(){super(...arguments),Q.add(this),Z.set(this,void 0)}get currentChatCompletionSnapshot(){return nw(this,Z,"f")}static fromReadableStream(e){let t=new nb;return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){let n=new nb;return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){let n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nw(this,Q,"m",ee).call(this);let s=await e.create({...t,stream:!0},{...r,signal:this.controller.signal});for await(let e of(this._connected(),s))nw(this,Q,"m",et).call(this,e);if(s.controller.signal?.aborted)throw new t0;return this._addChatCompletion(nw(this,Q,"m",er).call(this))}async _fromReadableStream(e,t){let r;let n=t?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),nw(this,Q,"m",ee).call(this),this._connected();let s=rr.fromReadableStream(e,this.controller);for await(let e of s)r&&r!==e.id&&this._addChatCompletion(nw(this,Q,"m",er).call(this)),nw(this,Q,"m",et).call(this,e),r=e.id;if(s.controller.signal?.aborted)throw new t0;return this._addChatCompletion(nw(this,Q,"m",er).call(this))}[(Z=new WeakMap,Q=new WeakSet,ee=function(){this.ended||n_(this,Z,void 0,"f")},et=function(e){if(this.ended)return;let t=nw(this,Q,"m",en).call(this,e);this._emit("chunk",e,t);let r=e.choices[0]?.delta?.content,n=t.choices[0]?.message;null!=r&&n?.role==="assistant"&&n?.content&&this._emit("content",r,n.content)},er=function(){if(this.ended)throw new tQ("stream has ended, this shouldn't happen");let e=nw(this,Z,"f");if(!e)throw new tQ("request ended without sending any chunks");return n_(this,Z,void 0,"f"),function(e){let{id:t,choices:r,created:n,model:s}=e;return{id:t,choices:r.map(({message:t,finish_reason:r,index:n,logprobs:s})=>{if(!r)throw new tQ(`missing finish_reason for choice ${n}`);let{content:a=null,function_call:i,tool_calls:o}=t,l=t.role;if(!l)throw new tQ(`missing role for choice ${n}`);if(i){let{arguments:e,name:t}=i;if(null==e)throw new tQ(`missing function_call.arguments for choice ${n}`);if(!t)throw new tQ(`missing function_call.name for choice ${n}`);return{message:{content:a,function_call:{arguments:e,name:t},role:l},finish_reason:r,index:n,logprobs:s}}return o?{index:n,finish_reason:r,logprobs:s,message:{role:l,content:a,tool_calls:o.map((t,r)=>{let{function:s,type:a,id:i}=t,{arguments:o,name:l}=s||{};if(null==i)throw new tQ(`missing choices[${n}].tool_calls[${r}].id
${nx(e)}`);if(null==a)throw new tQ(`missing choices[${n}].tool_calls[${r}].type
${nx(e)}`);if(null==l)throw new tQ(`missing choices[${n}].tool_calls[${r}].function.name
${nx(e)}`);if(null==o)throw new tQ(`missing choices[${n}].tool_calls[${r}].function.arguments
${nx(e)}`);return{id:i,type:a,function:{name:l,arguments:o}}})}}:{message:{content:a,role:l},finish_reason:r,index:n,logprobs:s}}),created:n,model:s,object:"chat.completion"}}(e)},en=function(e){var t,r,n;let s=nw(this,Z,"f"),{choices:a,...i}=e;for(let{delta:a,finish_reason:o,index:l,logprobs:c=null,...u}of(s?Object.assign(s,i):s=n_(this,Z,{...i,choices:[]},"f"),e.choices)){let e=s.choices[l];if(!e){s.choices[l]={finish_reason:o,index:l,message:a,logprobs:c,...u};continue}if(c&&(e.logprobs?c.content&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...c.content)):e.logprobs=c),o&&(e.finish_reason=o),Object.assign(e,u),!a)continue;let{content:i,function_call:h,role:d,tool_calls:f}=a;if(i&&(e.message.content=(e.message.content||"")+i),d&&(e.message.role=d),h&&(e.message.function_call?(h.name&&(e.message.function_call.name=h.name),h.arguments&&((r=e.message.function_call).arguments??(r.arguments=""),e.message.function_call.arguments+=h.arguments)):e.message.function_call=h),f)for(let{index:t,id:r,type:s,function:a}of(e.message.tool_calls||(e.message.tool_calls=[]),f)){let i=(n=e.message.tool_calls)[t]??(n[t]={});r&&(i.id=r),s&&(i.type=s),a&&(i.function??(i.function={arguments:""})),a?.name&&(i.function.name=a.name),a?.arguments&&(i.function.arguments+=a.arguments)}}return s},Symbol.asyncIterator)](){let e=[],t=[],r=!1;return this.on("chunk",r=>{let n=t.shift();n?n(r):e.push(r)}),this.on("end",()=>{for(let e of(r=!0,t))e(void 0);t.length=0}),{next:async()=>{if(!e.length)return r?{value:void 0,done:!0}:new Promise(e=>t.push(e)).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});let n=e.shift();return{value:n,done:!1}}}}toReadableStream(){let e=new rr(this[Symbol.asyncIterator].bind(this),this.controller);return e.toReadableStream()}}function nx(e){return JSON.stringify(e)}class nS extends nb{static fromReadableStream(e){let t=new nS;return t._run(()=>t._fromReadableStream(e)),t}static runFunctions(e,t,r){let n=new nS,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runFunctions"}};return n._run(()=>n._runFunctions(e,t,s)),n}static runTools(e,t,r){let n=new nS,s={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,s)),n}}class nE extends rX{runFunctions(e,t){return e.stream?nS.runFunctions(this._client.chat.completions,e,t):ny.runFunctions(this._client.chat.completions,e,t)}runTools(e,t){return e.stream?nS.runTools(this._client.chat.completions,e,t):ny.runTools(this._client.chat.completions,e,t)}stream(e,t){return nb.createChatCompletion(this._client.chat.completions,e,t)}}class nP extends rX{constructor(){super(...arguments),this.completions=new nE(this._client)}}(nP||(nP={})).Completions=nE;class nC extends rX{retrieve(e,t,r,n){return this._client.get(`/threads/${e}/messages/${t}/files/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,r={},n){return rR(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/messages/${t}/files`,nA,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class nA extends rK{}(nC||(nC={})).MessageFilesPage=nA;class nT extends rX{constructor(){super(...arguments),this.files=new nC(this._client)}create(e,t,r){return this._client.post(`/threads/${e}/messages`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/messages/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/messages/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},r){return rR(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/messages`,nR,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}}class nR extends rK{}!function(e){e.ThreadMessagesPage=nR,e.Files=nC,e.MessageFilesPage=nA}(nT||(nT={}));class nO extends rX{retrieve(e,t,r,n){return this._client.get(`/threads/${e}/runs/${t}/steps/${r}`,{...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t,r={},n){return rR(r)?this.list(e,t,{},r):this._client.getAPIList(`/threads/${e}/runs/${t}/steps`,nN,{query:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class nN extends rK{}(nO||(nO={})).RunStepsPage=nN;class nI extends rX{constructor(){super(...arguments),this.steps=new nO(this._client)}create(e,t,r){return this._client.post(`/threads/${e}/runs`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}retrieve(e,t,r){return this._client.get(`/threads/${e}/runs/${t}`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}update(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}list(e,t={},r){return rR(t)?this.list(e,{},t):this._client.getAPIList(`/threads/${e}/runs`,nM,{query:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}cancel(e,t,r){return this._client.post(`/threads/${e}/runs/${t}/cancel`,{...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}submitToolOutputs(e,t,r,n){return this._client.post(`/threads/${e}/runs/${t}/submit_tool_outputs`,{body:r,...n,headers:{"OpenAI-Beta":"assistants=v1",...n?.headers}})}}class nM extends rK{}!function(e){e.RunsPage=nM,e.Steps=nO,e.RunStepsPage=nN}(nI||(nI={}));class nk extends rX{constructor(){super(...arguments),this.runs=new nI(this._client),this.messages=new nT(this._client)}create(e={},t){return rR(e)?this.create({},e):this._client.post("/threads",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}retrieve(e,t){return this._client.get(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}update(e,t,r){return this._client.post(`/threads/${e}`,{body:t,...r,headers:{"OpenAI-Beta":"assistants=v1",...r?.headers}})}del(e,t){return this._client.delete(`/threads/${e}`,{...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:{"OpenAI-Beta":"assistants=v1",...t?.headers}})}}!function(e){e.Runs=nI,e.RunsPage=nM,e.Messages=nT,e.ThreadMessagesPage=nR}(nk||(nk={}));class nD extends rX{constructor(){super(...arguments),this.chat=new nP(this._client),this.assistants=new nc(this._client),this.threads=new nk(this._client)}}!function(e){e.Chat=nP,e.Assistants=nc,e.AssistantsPage=nu,e.Threads=nk}(nD||(nD={}));class nL extends rE{constructor({baseURL:e=rU("OPENAI_BASE_URL"),apiKey:t=rU("OPENAI_API_KEY"),organization:r=rU("OPENAI_ORG_ID")??null,...n}={}){if(void 0===t)throw new tQ("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");let s={apiKey:t,organization:r,...n,baseURL:e??"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&rW())throw new tQ("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:s.baseURL,timeout:s.timeout??6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new rz(this),this.chat=new rQ(this),this.edits=new rZ(this),this.embeddings=new r0(this),this.files=new r1(this),this.images=new r2(this),this.audio=new r6(this),this.moderations=new r5(this),this.models=new r8(this),this.fineTuning=new ns(this),this.fineTunes=new na(this),this.beta=new nD(this),this._options=s,this.apiKey=t,this.organization=r}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}es=nL,nL.OpenAI=es,nL.OpenAIError=tQ,nL.APIError=tZ,nL.APIConnectionError=t1,nL.APIConnectionTimeoutError=t4,nL.APIUserAbortError=t0,nL.NotFoundError=t9,nL.ConflictError=t6,nL.RateLimitError=t8,nL.BadRequestError=t2,nL.AuthenticationError=t3,nL.InternalServerError=re,nL.PermissionDeniedError=t7,nL.UnprocessableEntityError=t5;let{OpenAIError:nj,APIError:n$,APIConnectionError:nB,APIConnectionTimeoutError:nU,APIUserAbortError:nH,NotFoundError:nq,ConflictError:nF,RateLimitError:nG,BadRequestError:nV,AuthenticationError:nW,InternalServerError:nJ,PermissionDeniedError:nK,UnprocessableEntityError:nX}=ea;!function(e){e.toFile=rh,e.fileFromPath=m,e.Page=rJ,e.CursorPage=rK,e.Completions=rz,e.Chat=rQ,e.Edits=rZ,e.Embeddings=r0,e.Files=r1,e.FileObjectsPage=r4,e.Images=r2,e.Audio=r6,e.Moderations=r5,e.Models=r8,e.ModelsPage=ne,e.FineTuning=ns,e.FineTunes=na,e.FineTunesPage=ni,e.Beta=nD}(nL||(nL={}));let nz=nL,nY=[239,187,191];var nQ={code:"0",name:"text",parse:e=>{if("string"!=typeof e)throw Error('"text" parts expect a string value.');return{type:"text",value:e}}},nZ={code:"1",name:"function_call",parse:e=>{if(null==e||"object"!=typeof e||!("function_call"in e)||"object"!=typeof e.function_call||null==e.function_call||!("name"in e.function_call)||!("arguments"in e.function_call)||"string"!=typeof e.function_call.name||"string"!=typeof e.function_call.arguments)throw Error('"function_call" parts expect an object with a "function_call" property.');return{type:"function_call",value:e}}},n0={code:"2",name:"data",parse:e=>{if(!Array.isArray(e))throw Error('"data" parts expect an array value.');return{type:"data",value:e}}},n1={code:"3",name:"error",parse:e=>{if("string"!=typeof e)throw Error('"error" parts expect a string value.');return{type:"error",value:e}}},n4={code:"4",name:"assistant_message",parse:e=>{if(null==e||"object"!=typeof e||!("id"in e)||!("role"in e)||!("content"in e)||"string"!=typeof e.id||"string"!=typeof e.role||"assistant"!==e.role||!Array.isArray(e.content)||!e.content.every(e=>null!=e&&"object"==typeof e&&"type"in e&&"text"===e.type&&"text"in e&&null!=e.text&&"object"==typeof e.text&&"value"in e.text&&"string"==typeof e.text.value))throw Error('"assistant_message" parts expect an object with an "id", "role", and "content" property.');return{type:"assistant_message",value:e}}},n2={code:"5",name:"assistant_control_data",parse:e=>{if(null==e||"object"!=typeof e||!("threadId"in e)||!("messageId"in e)||"string"!=typeof e.threadId||"string"!=typeof e.messageId)throw Error('"assistant_control_data" parts expect an object with a "threadId" and "messageId" property.');return{type:"assistant_control_data",value:{threadId:e.threadId,messageId:e.messageId}}}},n3={code:"6",name:"data_message",parse:e=>{if(null==e||"object"!=typeof e||!("role"in e)||!("data"in e)||"string"!=typeof e.role||"data"!==e.role)throw Error('"data_message" parts expect an object with a "role" and "data" property.');return{type:"data_message",value:e}}},n7={code:"7",name:"tool_calls",parse:e=>{if(null==e||"object"!=typeof e||!("tool_calls"in e)||"object"!=typeof e.tool_calls||null==e.tool_calls||!Array.isArray(e.tool_calls)||e.tool_calls.some(e=>{null!=e&&"object"==typeof e&&"id"in e&&"string"==typeof e.id&&"type"in e&&"string"==typeof e.type&&"function"in e&&null!=e.function&&"object"==typeof e.function&&"arguments"in e.function&&"string"==typeof e.function.name&&e.function.arguments}))throw Error('"tool_calls" parts expect an object with a ToolCallPayload.');return{type:"tool_calls",value:e}}},n9=[nQ,nZ,n0,n1,n4,n2,n3,n7],n6={[nQ.code]:nQ,[nZ.code]:nZ,[n0.code]:n0,[n1.code]:n1,[n4.code]:n4,[n2.code]:n2,[n3.code]:n3,[n7.code]:n7},n5=(nQ.name,nQ.code,nZ.name,nZ.code,n0.name,n0.code,n1.name,n1.code,n4.name,n4.code,n2.name,n2.code,n3.name,n3.code,n7.name,n7.code,n9.map(e=>e.code)),n8=e=>{let t=e.indexOf(":");if(-1===t)throw Error("Failed to parse stream string. No separator found.");let r=e.slice(0,t);if(!n5.includes(r))throw Error(`Failed to parse stream string. Invalid code ${r}.`);let n=e.slice(t+1),s=JSON.parse(n);return n6[r].parse(s)};function se(e,t){let r=n9.find(t=>t.name===e);if(!r)throw Error(`Invalid stream part type: ${e}`);return`${r.code}:${JSON.stringify(t)}
`}function st(e){let t=new TextEncoder,r="",n=e||{};return new TransformStream({async start(){n.onStart&&await n.onStart()},async transform(e,s){s.enqueue(t.encode(e)),r+=e,n.onToken&&await n.onToken(e)},async flush(){n.onCompletion&&await n.onCompletion(r),!n.onFinal||"experimental_onFunctionCall"in n||await n.onFinal(r)}})}((e,t=21)=>(r=t)=>{let n="",s=r;for(;s--;)n+=e[Math.random()*e.length|0];return n})("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",7);new TextDecoder("utf-8");async function*sr(e){let t=sn();for await(let r of e){let e=t(r);e&&(yield e)}}function sn(){let e,t;let r=(t=!0,e=>(t&&(e=e.trimStart())&&(t=!1),e));return t=>{var s,a,i,o,l,c,u,h,d,f,p,g,m,v,y,w,_;if(sa(t)){let r=null==(s=t.choices[0])?void 0:s.delta;if(null==(a=r.function_call)?void 0:a.name)return e=!0,`{"function_call": {"name": "${r.function_call.name}", "arguments": "`;if(null==(l=null==(o=null==(i=r.tool_calls)?void 0:i[0])?void 0:o.function)?void 0:l.name){e=!0;let t=r.tool_calls[0];return 0===t.index?`{"tool_calls":[ {"id": "${t.id}", "type": "function", "function": {"name": "${null==(c=t.function)?void 0:c.name}", "arguments": "`:`"}}, {"id": "${t.id}", "type": "function", "function": {"name": "${null==(u=t.function)?void 0:u.name}", "arguments": "`}if(null==(h=r.function_call)?void 0:h.arguments)return n(null==(d=r.function_call)?void 0:d.arguments);if(null==(p=null==(f=r.tool_calls)?void 0:f[0].function)?void 0:p.arguments)return n(null==(v=null==(m=null==(g=r.tool_calls)?void 0:g[0])?void 0:m.function)?void 0:v.arguments);else if(e&&((null==(y=t.choices[0])?void 0:y.finish_reason)==="function_call"||(null==(w=t.choices[0])?void 0:w.finish_reason)==="stop"))return e=!1,'"}}';else if(e&&(null==(_=t.choices[0])?void 0:_.finish_reason)==="tool_calls")return e=!1,'"}}]}'}let b=r(sa(t)&&t.choices[0].delta.content?t.choices[0].delta.content:"choices"in t&&t.choices&&t.choices[0]&&"text"in t.choices[0]?t.choices[0].text:"");return b};function n(e){return`${e.replace(/\\/g,"\\\\").replace(/\//g,"\\/").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f")}`}}var ss=Symbol("internal_openai_fn_messages");function sa(e){return"choices"in e&&e.choices&&e.choices[0]&&"delta"in e.choices[0]}var si=class extends Response{constructor(e,t,r){let n=e;r&&(n=e.pipeThrough(r.stream)),super(n,{...t,status:200,headers:{"Content-Type":"text/plain; charset=utf-8","X-Experimental-Stream-Data":r?"true":"false",...null==t?void 0:t.headers}})}};let so=new nz({apiKey:process.env.OPENAI_API_KEY}),sl="edge";async function sc(e){let{messages:t}=await e.json();if(1===t.length&&"system"===t[0].role)return new Response(JSON.stringify({message:t[0].content}),{headers:{"Content-Type":"application/json"}});let r=await so.chat.completions.create({model:"gpt-3.5-turbo",messages:[{role:"system",content:`You are Bob, an AI interviewer conducting a behavioral interview. 
        Ask questions based on the user's resume and experience. 
        Try to ask about several previous jobs and experiences, listed in the user's resume.
        Keep your responses concise and suitable for text-to-speech processing.
        Ask one question at a time and wait for the user's response.
        After the user responds, provide feedback and ask the next question.
        If the user seems to be joking or not taking the interview seriously, acknowledge it and then move on to the next question.
        After the interview, provide a summary of the interview and the user's strengths and weaknesses, but don't give the strenghts and weaknesses as a numbered list, instead as a short paragraph for each
        After the interview give a score out of 100, and a short paragraph explaining the score. The last sentence after the score should be "Thank you for your time, have a great day!" and should only be repeated once in the whole conversation, at the end of the interview.
        `},...t],stream:!0}),n=function e(t,r){let n,s;if(n=Symbol.asyncIterator in t?(s=sr(t)[Symbol.asyncIterator](),new ReadableStream({async pull(e){let{done:t,value:r}=await s.next();t?e.close():e.enqueue(r)},async cancel(e){var t;await (null==(t=s.return)?void 0:t.call(s,e))}})).pipeThrough(st((null==r?void 0:r.experimental_onFunctionCall)||(null==r?void 0:r.experimental_onToolCall)?{...r,onFinal:void 0}:{...r})):function(e,t,r){if(!e.ok){if(!e.body)return new ReadableStream({start(e){e.error(Error("Response error: No response body"))}});{let t=e.body.getReader();return new ReadableStream({async start(e){let{done:r,value:n}=await t.read();if(!r){let t=new TextDecoder().decode(n);e.error(Error(`Response error: ${t}`))}}})}}let n=e.body||new ReadableStream({start(e){e.close()}});return n.pipeThrough(function(e){let t;let r=new TextDecoder;return new TransformStream({async start(r){t=function(e){let t,r,n,s,a,i,o;return l(),{feed:function(l){var c;r=r?r+l:l,t&&(c=r,nY.every((e,t)=>c.charCodeAt(t)===e))&&(r=r.slice(nY.length)),t=!1;let u=r.length,h=0,d=!1;for(;h<u;){let t;d&&("\n"===r[h]&&++h,d=!1);let l=-1,c=s;for(let e=n;l<0&&e<u;++e)":"===(t=r[e])&&c<0?c=e-h:"\r"===t?(d=!0,l=e-h):"\n"===t&&(l=e-h);if(l<0){n=u-h,s=c;break}n=0,s=-1,function(t,r,n,s){if(0===s){o.length>0&&(e({type:"event",id:a,event:i||void 0,data:o.slice(0,-1)}),o="",a=void 0),i=void 0;return}let l=n<0,c=t.slice(r,r+(l?s:n)),u=0;u=l?s:" "===t[r+n+1]?n+2:n+1;let h=r+u,d=s-u,f=t.slice(h,h+d).toString();if("data"===c)o+=f?"".concat(f,"\n"):"\n";else if("event"===c)i=f;else if("id"!==c||f.includes("\x00")){if("retry"===c){let t=parseInt(f,10);Number.isNaN(t)||e({type:"reconnect-interval",value:t})}}else a=f}(r,h,c,l),h+=l+1}h===u?r="":h>0&&(r=r.slice(h))},reset:l};function l(){t=!0,r="",n=0,s=-1,a=void 0,i=void 0,o=""}}(t=>{if("data"in t&&"event"===t.type&&"[DONE]"===t.data||"done"===t.event){r.terminate();return}if("data"in t){let n=e?e(t.data):t.data;n&&r.enqueue(n)}})},transform(e){t.feed(r.decode(e))}})}(t)).pipeThrough(st(r))}(t,function(){let e=sn();return t=>e(JSON.parse(t))}(),(null==r?void 0:r.experimental_onFunctionCall)||(null==r?void 0:r.experimental_onToolCall)?{...r,onFinal:void 0}:{...r}),!r||!r.experimental_onFunctionCall&&!r.experimental_onToolCall)return n.pipeThrough(function(e){if(!e)return new TransformStream({transform:async(e,t)=>{t.enqueue(e)}});let t=new TextEncoder,r=new TextDecoder;return new TransformStream({transform:async(e,n)=>{let s=r.decode(e);n.enqueue(t.encode(se("text",s)))}})}(null==r?void 0:r.experimental_streamData));{let t=function(t){let r=new TextEncoder,n=!0,s="",a="",i=!1,o=t[ss]||[],l=null==t?void 0:t.experimental_streamData,c=function(e){let t=new TextDecoder;return function(e){return e?t.decode(e,{stream:!0}):""}}();return new TransformStream({async transform(e,t){let o=c(e);a+=o;let u=n&&(o.startsWith('{"function_call":')||o.startsWith('{"tool_calls":'));if(u){i=!0,s+=o,n=!1;return}if(i)s+=o;else{t.enqueue(l?r.encode(se("text",o)):e);return}},async flush(c){try{if(!n&&i&&(t.experimental_onFunctionCall||t.experimental_onToolCall)){let n;i=!1;let a=JSON.parse(s),u=[...o];if(t.experimental_onFunctionCall){void 0===a.function_call&&console.warn("experimental_onFunctionCall should not be defined when using tools");let e=JSON.parse(a.function_call.arguments);n=await t.experimental_onFunctionCall({name:a.function_call.name,arguments:e},e=>u=[...o,{role:"assistant",content:"",function_call:a.function_call},{role:"function",name:a.function_call.name,content:JSON.stringify(e)}])}if(t.experimental_onToolCall){let e={tools:[]};for(let t of a.tool_calls)e.tools.push({id:t.id,type:"function",func:{name:t.function.name,arguments:t.function.arguments}});let r=0;try{n=await t.experimental_onToolCall(e,e=>{if(e){let{tool_call_id:t,function_name:n,tool_call_result:s}=e;u=[...u,...0===r?[{role:"assistant",content:"",tool_calls:a.tool_calls.map(e=>({id:e.id,type:"function",function:{name:e.function.name,arguments:JSON.stringify(e.function.arguments)}}))}]:[],{role:"tool",tool_call_id:t,name:n,content:JSON.stringify(s)}],r++}return u})}catch(e){console.error("Error calling experimental_onToolCall:",e)}}if(n){if("string"==typeof n){c.enqueue(l?r.encode(se("text",n)):r.encode(n));return}}else{c.enqueue(r.encode(l?se(a.function_call?"function_call":"tool_calls",JSON.parse(s)):s));return}let h={...t,onStart:void 0};t.onFinal=void 0;let d=e(n,{...h,[ss]:u}),f=d.getReader();for(;;){let{done:e,value:t}=await f.read();if(e)break;c.enqueue(t)}}}finally{t.onFinal&&a&&await t.onFinal(a)}}})}(r);return n.pipeThrough(t)}}(r,{onCompletion:async e=>{console.log("Stream completed:",e)},onToken:async e=>{console.log("Received token:",e)}});return new si(n)}let su=class extends tv{static is(e){return e.definition.kind===O.APP_ROUTE}constructor({userland:e,definition:t,resolvedPagePath:r,nextConfigOutput:n}){if(super({userland:e,definition:t}),this.requestAsyncStorage=tF,this.staticGenerationAsyncStorage=tG,this.serverHooks=tV,this.headerHooks=tW,this.staticGenerationBailout=tJ,this.actionAsyncStorage=tK,this.resolvedPagePath=r,this.nextConfigOutput=n,this.methods=function(e){let t=tb.reduce((t,r)=>({...t,[r]:e[r]??t_}),{}),r=new Set(tb.filter(t=>e[t])),n=tH.filter(e=>!r.has(e));for(let s of n){if("HEAD"===s){if(!e.GET)break;t.HEAD=e.GET,r.add("HEAD");continue}if("OPTIONS"===s){let e=["OPTIONS",...r];!r.has("HEAD")&&r.has("GET")&&e.push("HEAD");let n={Allow:e.sort().join(", ")};t.OPTIONS=()=>new Response(null,{status:204,headers:n}),r.add("OPTIONS");continue}throw Error(`Invariant: should handle all automatic implementable methods, got method: ${s}`)}return t}(e),this.nonStaticMethods=function(e){let t=tq.filter(t=>e[t]);return 0!==t.length&&t}(e),this.dynamic=this.userland.dynamic,"export"===this.nextConfigOutput){if(this.dynamic&&"auto"!==this.dynamic){if("force-dynamic"===this.dynamic)throw Error(`export const dynamic = "force-dynamic" on page "${t.pathname}" cannot be used with "output: export". See more info here: https://nextjs.org/docs/advanced-features/static-html-export`)}else this.dynamic="error"}}resolve(e){return tb.includes(e)?this.methods[e]:tw}async execute(e,t){let n=this.resolve(e.method),s={req:e};s.renderOpts={previewProps:t.prerenderManifest.preview};let a={pathname:this.definition.pathname,renderOpts:t.staticGenerationContext??{supportsDynamicHTML:!1}};a.renderOpts.fetchCache=this.userland.fetchCache;let i=await this.actionAsyncStorage.run({isAppRoute:!0},()=>eZ.wrap(this.requestAsyncStorage,s,()=>ty.wrap(this.staticGenerationAsyncStorage,a,s=>{var a;switch(this.nonStaticMethods&&this.staticGenerationBailout(`non-static methods used ${this.nonStaticMethods.join(", ")}`),this.dynamic){case"force-dynamic":s.forceDynamic=!0,this.staticGenerationBailout("force-dynamic",{dynamic:this.dynamic});break;case"force-static":s.forceStatic=!0;break;case"error":s.dynamicShouldError=!0}s.revalidate??=this.userland.revalidate??!1;let i=function(e,{dynamic:t},r){function n(e){switch(e){case"search":case"searchParams":case"toString":case"href":case"origin":r.staticGenerationBailout(`nextUrl.${e}`);return;default:return}}let s={},a=(e,t)=>{switch(t){case"search":return"";case"searchParams":return s.searchParams||(s.searchParams=new URLSearchParams),s.searchParams;case"url":case"href":return s.url||(s.url=tB(e)),s.url;case"toJSON":case"toString":return s.url||(s.url=tB(e)),s.toString||(s.toString=()=>s.url),s.toString;case"headers":return s.headers||(s.headers=new Headers),s.headers;case"cookies":return s.headers||(s.headers=new Headers),s.cookies||(s.cookies=new t$.RequestCookies(s.headers)),s.cookies;case"clone":return s.url||(s.url=tB(e)),()=>new eN(s.url)}},i=new Proxy(e.nextUrl,{get(e,r){if(n(r),"force-static"===t&&"string"==typeof r){let t=a(e.href,r);if(void 0!==t)return t}let s=e[r];return"function"==typeof s?s.bind(e):s},set:(e,t,r)=>(n(t),e[t]=r,!0)}),o=e=>{switch(e){case"headers":r.headerHooks.headers();return;case"url":case"body":case"blob":case"json":case"text":case"arrayBuffer":case"formData":r.staticGenerationBailout(`request.${e}`);return;default:return}};return new Proxy(e,{get(e,r){if(o(r),"nextUrl"===r)return i;if("force-static"===t&&"string"==typeof r){let t=a(e.url,r);if(void 0!==t)return t}let n=e[r];return"function"==typeof n?n.bind(e):n},set:(e,t,r)=>(o(t),e[t]=r,!0)})}(e,{dynamic:this.dynamic},{headerHooks:this.headerHooks,serverHooks:this.serverHooks,staticGenerationBailout:this.staticGenerationBailout}),o=function(e){let t="/app/";e.includes(t)||(t="\\app\\");let[,...r]=e.split(t),n=t[0]+r.join(t),s=n.split(".").slice(0,-1).join(".");return s}(this.resolvedPagePath);return null==(a=tk().getRootSpanAttributes())||a.set("next.route",o),tk().trace(A.runHandler,{spanName:`executing api route (app) ${o}`,attributes:{"next.route":o}},async()=>{var e;!function({serverHooks:e,staticGenerationAsyncStorage:t}){if(globalThis._nextOriginalFetch||(globalThis._nextOriginalFetch=globalThis.fetch),globalThis.fetch.__nextPatched)return;let{DynamicServerError:n}=e,s=globalThis._nextOriginalFetch;globalThis.fetch=async(e,a)=>{var i,o;let l;try{(l=new URL(e instanceof Request?e.url:e)).username="",l.password=""}catch{l=void 0}let c=(null==l?void 0:l.href)??"",u=Date.now(),h=(null==a?void 0:null==(i=a.method)?void 0:i.toUpperCase())||"GET",d=(null==(o=null==a?void 0:a.next)?void 0:o.internal)===!0;return await tk().trace(d?b.internalFetch:E.fetch,{kind:tC.CLIENT,spanName:["fetch",h,c].filter(Boolean).join(" "),attributes:{"http.url":c,"http.method":h,"net.peer.name":null==l?void 0:l.hostname,"net.peer.port":(null==l?void 0:l.port)||void 0}},async()=>{var i,o;let l,h,f;let p=t.getStore()||(null==fetch.__nextGetStaticStore?void 0:fetch.__nextGetStaticStore()),g=e&&"object"==typeof e&&"string"==typeof e.method,m=t=>(g?e[t]:null)||(null==a?void 0:a[t]);if(!p||d||p.isDraftMode)return s(e,a);let v=t=>{var r,n,s;return void 0!==(null==a?void 0:null==(r=a.next)?void 0:r[t])?null==a?void 0:null==(n=a.next)?void 0:n[t]:g?null==(s=e.next)?void 0:s[t]:void 0},y=v("revalidate"),w=v("tags")||[];if(Array.isArray(w))for(let e of(p.tags||(p.tags=[]),w))p.tags.includes(e)||p.tags.push(e);let _=tL(p);for(let e of _||[])w.includes(e)||w.push(e);let b="only-cache"===p.fetchCache,x="force-cache"===p.fetchCache,S="default-cache"===p.fetchCache,E="default-no-store"===p.fetchCache,P="only-no-store"===p.fetchCache,C="force-no-store"===p.fetchCache,A=m("cache"),T="";"string"==typeof A&&void 0!==y&&(console.warn(`Warning: fetch for ${c} on ${p.pathname} specified "cache: ${A}" and "revalidate: ${y}", only one should be specified.`),A=void 0),"force-cache"===A&&(y=!1),["no-cache","no-store"].includes(A||"")&&(y=0,T=`cache: ${A}`),("number"==typeof y||!1===y)&&(f=y);let R=m("headers"),O="function"==typeof(null==R?void 0:R.get)?R:new Headers(R||{}),N=O.get("authorization")||O.get("cookie"),I=!["get","head"].includes((null==(i=m("method"))?void 0:i.toLowerCase())||"get"),M=(N||I)&&0===p.revalidate;if(C&&(f=0,T="fetchCache = force-no-store"),P){if("force-cache"===A||0===f)throw Error(`cache: 'force-cache' used on fetch for ${c} with 'export const fetchCache = 'only-no-store'`);f=0,T="fetchCache = only-no-store"}if(b&&"no-store"===A)throw Error(`cache: 'no-store' used on fetch for ${c} with 'export const fetchCache = 'only-cache'`);x&&(void 0===y||0===y)&&(T="fetchCache = force-cache",f=!1),void 0===f?S?(f=!1,T="fetchCache = default-cache"):M?(f=0,T="auto no cache"):E?(f=0,T="fetchCache = default-no-store"):(T="auto cache",f="boolean"!=typeof p.revalidate&&void 0!==p.revalidate&&p.revalidate):T||(T=`revalidate: ${f}`),!M&&(void 0===p.revalidate||"number"==typeof f&&(!1===p.revalidate||"number"==typeof p.revalidate&&f<p.revalidate))&&(p.revalidate=f);let k="number"==typeof f&&f>0||!1===f;if(p.incrementalCache&&k)try{l=await p.incrementalCache.fetchCacheKey(c,g?e:a)}catch(t){console.error("Failed to generate cache key for",e)}let D=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window","duplex"];if(g){let t=e,r={body:t._ogBody||t.body};for(let e of D)r[e]=t[e];e=new Request(t.url,r)}else if(a){let e=a;for(let t of(a={body:a._ogBody||a.body},D))a[t]=e[t]}let L=p.nextFetchId??1;p.nextFetchId=L+1;let j="number"!=typeof f?31536e3:f,$=async(t,r)=>{let n={...a,next:{...null==a?void 0:a.next,fetchType:"origin",fetchIdx:L}};return s(e,n).then(async s=>{if(t||tj(p,{start:u,url:c,cacheReason:r||T,cacheStatus:0===f||r?"skip":"miss",status:s.status,method:n.method||"GET"}),200===s.status&&p.incrementalCache&&l&&k){let t=tD.from(await s.arrayBuffer());try{await p.incrementalCache.set(l,{kind:"FETCH",data:{headers:Object.fromEntries(s.headers.entries()),body:t.toString("base64"),status:s.status,tags:w,url:s.url},revalidate:j},f,!0,c,L)}catch(t){console.warn("Failed to set fetch cache",e,t)}let r=new Response(t,{headers:new Headers(s.headers),status:s.status});return Object.defineProperty(r,"url",{value:s.url}),r}return s})},B=()=>Promise.resolve();if(l&&p.incrementalCache){B=await p.incrementalCache.lock(l);let e=p.isOnDemandRevalidate?null:await p.incrementalCache.get(l,!0,f,c,L);if(e?await B():h="cache-control: no-cache (hard refresh)",(null==e?void 0:e.value)&&"FETCH"===e.value.kind){let t=e.value.data.tags;if(!(p.isRevalidate&&e.isStale)){let n;if(e.isStale)p.pendingRevalidates||(p.pendingRevalidates=[]),p.pendingRevalidates.push($(!0).catch(console.error));else if(w&&!w.every(e=>null==t?void 0:t.includes(e))){for(let t of(e.value.data.tags||(e.value.data.tags=[]),w))e.value.data.tags.includes(t)||e.value.data.tags.push(t);null==(o=p.incrementalCache)||o.set(l,e.value,f,!0,c,L)}let s=e.value.data;{let{decode:e}=r(135);n=e(s.body)}tj(p,{start:u,url:c,cacheReason:T,cacheStatus:"hit",status:s.status||200,method:(null==a?void 0:a.method)||"GET"});let i=new Response(n,{headers:s.headers,status:s.status});return Object.defineProperty(i,"url",{value:e.value.data.url}),i}}}if(p.isStaticGeneration&&a&&"object"==typeof a){let t=a.cache;if(delete a.cache,"no-store"===t){p.revalidate=0;let t=`no-store fetch ${e}${p.pathname?` ${p.pathname}`:""}`,r=new n(t);p.dynamicUsageErr=r,p.dynamicUsageStack=r.stack,p.dynamicUsageDescription=t}let r="next"in a,s=a.next||{};if("number"==typeof s.revalidate&&(void 0===p.revalidate||"number"==typeof p.revalidate&&s.revalidate<p.revalidate)){let t=p.forceDynamic;if(t&&0===s.revalidate||(p.revalidate=s.revalidate),!t&&0===s.revalidate){let t=`revalidate: ${s.revalidate} fetch ${e}${p.pathname?` ${p.pathname}`:""}`,r=new n(t);p.dynamicUsageErr=r,p.dynamicUsageStack=r.stack,p.dynamicUsageDescription=t}}r&&delete a.next}return $(!1,h).finally(B)})},globalThis.fetch.__nextGetStaticStore=()=>t,globalThis.fetch.__nextPatched=!0}({serverHooks:this.serverHooks,staticGenerationAsyncStorage:this.staticGenerationAsyncStorage});let a=await n(i,{params:t.params?function(e){let t={};for(let[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}(t.params):void 0});t.staticGenerationContext.fetchMetrics=s.fetchMetrics,await Promise.all(s.pendingRevalidates||[]),tL(s),t.staticGenerationContext.fetchTags=null==(e=s.tags)?void 0:e.join(",");let o=this.requestAsyncStorage.getStore();if(o&&o.mutableCookies){let e=new Headers(a.headers);if((0,ez._5)(e,o.mutableCookies))return new Response(a.body,{status:a.status,statusText:a.statusText,headers:e})}return a})})));if(!(i instanceof Response))return new Response(null,{status:500});if(i.headers.has("x-middleware-rewrite"))throw Error("NextResponse.rewrite() was used in a app route handler, this is not currently supported. Please remove the invocation to continue.");if("1"===i.headers.get("x-middleware-next"))throw Error("NextResponse.next() was used in a app route handler, this is not supported. See here for more info: https://nextjs.org/docs/messages/next-response-next-in-app-route-handler");return i}async handle(e,t){try{let r=await this.execute(e,t);return r}catch(t){let e=function(e){if(tU(e)){let t=tU(e)?e.digest.split(";",3)[2]:null;if(!t)throw Error("Invariant: Unexpected redirect url format");return function(e,t){let r=new Headers({location:e});return(0,ez._5)(r,t),new Response(null,{status:307,headers:r})}(t,e.mutableCookies)}return(null==e?void 0:e.digest)==="NEXT_NOT_FOUND"&&new Response(null,{status:404})}(t);if(!e)throw t;return e}}},sh=new su({definition:{kind:O.APP_ROUTE,page:"/api/openai-gpt/route",pathname:"/api/openai-gpt",filename:"route",bundlePath:"app/api/openai-gpt/route"},resolvedPagePath:"C:\\Users\\JoseP\\Documents\\landingMarketingPages\\ip-clone-best-daily-test\\app\\api\\openai-gpt\\route.ts",nextConfigOutput:"",userland:ei}),{requestAsyncStorage:sd,staticGenerationAsyncStorage:sf,serverHooks:sp,headerHooks:sg,staticGenerationBailout:sm}=sh,sv="/api/openai-gpt/route",sy=eo,sw=tm.wrap(sh)},928:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,s=Object.prototype.hasOwnProperty,a={};function i(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`].filter(Boolean);return`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}; ${r.join("; ")}`}function o(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[n,s]=[r.slice(0,e),r.slice(e+1)];try{t.set(n,decodeURIComponent(null!=s?s:"true"))}catch{}}return t}function l(e){var t;if(!e)return;let[[r,n],...s]=o(e),{domain:a,expires:i,httponly:l,maxage:u,path:h,samesite:d,secure:f}=Object.fromEntries(s.map(([e,t])=>[e.toLowerCase(),t])),p={name:r,value:decodeURIComponent(n),domain:a,...i&&{expires:new Date(i)},...l&&{httpOnly:!0},..."string"==typeof u&&{maxAge:Number(u)},path:h,...d&&{sameSite:c.includes(t=(t=d).toLowerCase())?t:void 0},...f&&{secure:!0}};return function(e){let t={};for(let r in e)e[r]&&(t[r]=e[r]);return t}(p)}((e,r)=>{for(var n in r)t(e,n,{get:r[n],enumerable:!0})})(a,{RequestCookies:()=>h,ResponseCookies:()=>d,parseCookie:()=>o,parseSetCookie:()=>l,splitCookiesString:()=>u,stringifyCookie:()=>i}),e.exports=((e,a,i,o)=>{if(a&&"object"==typeof a||"function"==typeof a)for(let i of n(a))s.call(e,i)||void 0===i||t(e,i,{get:()=>a[i],enumerable:!(o=r(a,i))||o.enumerable});return e})(t({},"__esModule",{value:!0}),a);var c=["strict","lax","none"];function u(e){if(!e)return[];var t,r,n,s,a,i=[],o=0;function l(){for(;o<e.length&&/\s/.test(e.charAt(o));)o+=1;return o<e.length}for(;o<e.length;){for(t=o,a=!1;l();)if(","===(r=e.charAt(o))){for(n=o,o+=1,l(),s=o;o<e.length&&"="!==(r=e.charAt(o))&&";"!==r&&","!==r;)o+=1;o<e.length&&"="===e.charAt(o)?(a=!0,o=s,i.push(e.substring(t,n)),t=o):o=n+1}else o+=1;(!a||o>=e.length)&&i.push(e.substring(t,e.length))}return i}var h=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t){let e=o(t);for(let[t,r]of e)this._parsed.set(t,{name:t,value:r})}}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===n).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,n=this._parsed;return n.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(n).map(([e,t])=>i(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>i(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},d=class{constructor(e){var t,r,n;this._parsed=new Map,this._headers=e;let s=null!=(n=null!=(r=null==(t=e.getAll)?void 0:t.call(e,"set-cookie"))?r:e.get("set-cookie"))?n:[],a=Array.isArray(s)?s:u(s);for(let e of a){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let n="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===n)}has(e){return this._parsed.has(e)}set(...e){let[t,r,n]=1===e.length?[e[0].name,e[0].value,e[0]]:e,s=this._parsed;return s.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...n})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=i(r);t.append("set-cookie",e)}}(s,this._headers),this}delete(...e){let[t,r,n]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0].path,e[0].domain];return this.set({name:t,path:r,domain:n,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(i).join("; ")}}},49:(e,t,r)=>{"use strict";(()=>{var t={339:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ContextAPI=void 0;let n=r(44),s=r(38),a=r(741),i="context",o=new n.NoopContextManager;class l{constructor(){}static getInstance(){return this._instance||(this._instance=new l),this._instance}setGlobalContextManager(e){return(0,s.registerGlobal)(i,e,a.DiagAPI.instance())}active(){return this._getContextManager().active()}with(e,t,r,...n){return this._getContextManager().with(e,t,r,...n)}bind(e,t){return this._getContextManager().bind(e,t)}_getContextManager(){return(0,s.getGlobal)(i)||o}disable(){this._getContextManager().disable(),(0,s.unregisterGlobal)(i,a.DiagAPI.instance())}}t.ContextAPI=l},741:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagAPI=void 0;let n=r(144),s=r(871),a=r(133),i=r(38);class o{constructor(){function e(e){return function(...t){let r=(0,i.getGlobal)("diag");if(r)return r[e](...t)}}let t=this;t.setLogger=(e,r={logLevel:a.DiagLogLevel.INFO})=>{var n,o,l;if(e===t){let e=Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error(null!==(n=e.stack)&&void 0!==n?n:e.message),!1}"number"==typeof r&&(r={logLevel:r});let c=(0,i.getGlobal)("diag"),u=(0,s.createLogLevelDiagLogger)(null!==(o=r.logLevel)&&void 0!==o?o:a.DiagLogLevel.INFO,e);if(c&&!r.suppressOverrideMessage){let e=null!==(l=Error().stack)&&void 0!==l?l:"<failed to generate stacktrace>";c.warn(`Current logger will be overwritten from ${e}`),u.warn(`Current logger will overwrite one already registered from ${e}`)}return(0,i.registerGlobal)("diag",u,t,!0)},t.disable=()=>{(0,i.unregisterGlobal)("diag",t)},t.createComponentLogger=e=>new n.DiagComponentLogger(e),t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}static instance(){return this._instance||(this._instance=new o),this._instance}}t.DiagAPI=o},128:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsAPI=void 0;let n=r(333),s=r(38),a=r(741),i="metrics";class o{constructor(){}static getInstance(){return this._instance||(this._instance=new o),this._instance}setGlobalMeterProvider(e){return(0,s.registerGlobal)(i,e,a.DiagAPI.instance())}getMeterProvider(){return(0,s.getGlobal)(i)||n.NOOP_METER_PROVIDER}getMeter(e,t,r){return this.getMeterProvider().getMeter(e,t,r)}disable(){(0,s.unregisterGlobal)(i,a.DiagAPI.instance())}}t.MetricsAPI=o},930:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropagationAPI=void 0;let n=r(38),s=r(600),a=r(625),i=r(377),o=r(701),l=r(741),c="propagation",u=new s.NoopTextMapPropagator;class h{constructor(){this.createBaggage=o.createBaggage,this.getBaggage=i.getBaggage,this.getActiveBaggage=i.getActiveBaggage,this.setBaggage=i.setBaggage,this.deleteBaggage=i.deleteBaggage}static getInstance(){return this._instance||(this._instance=new h),this._instance}setGlobalPropagator(e){return(0,n.registerGlobal)(c,e,l.DiagAPI.instance())}inject(e,t,r=a.defaultTextMapSetter){return this._getGlobalPropagator().inject(e,t,r)}extract(e,t,r=a.defaultTextMapGetter){return this._getGlobalPropagator().extract(e,t,r)}fields(){return this._getGlobalPropagator().fields()}disable(){(0,n.unregisterGlobal)(c,l.DiagAPI.instance())}_getGlobalPropagator(){return(0,n.getGlobal)(c)||u}}t.PropagationAPI=h},967:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceAPI=void 0;let n=r(38),s=r(414),a=r(994),i=r(542),o=r(741),l="trace";class c{constructor(){this._proxyTracerProvider=new s.ProxyTracerProvider,this.wrapSpanContext=a.wrapSpanContext,this.isSpanContextValid=a.isSpanContextValid,this.deleteSpan=i.deleteSpan,this.getSpan=i.getSpan,this.getActiveSpan=i.getActiveSpan,this.getSpanContext=i.getSpanContext,this.setSpan=i.setSpan,this.setSpanContext=i.setSpanContext}static getInstance(){return this._instance||(this._instance=new c),this._instance}setGlobalTracerProvider(e){let t=(0,n.registerGlobal)(l,this._proxyTracerProvider,o.DiagAPI.instance());return t&&this._proxyTracerProvider.setDelegate(e),t}getTracerProvider(){return(0,n.getGlobal)(l)||this._proxyTracerProvider}getTracer(e,t){return this.getTracerProvider().getTracer(e,t)}disable(){(0,n.unregisterGlobal)(l,o.DiagAPI.instance()),this._proxyTracerProvider=new s.ProxyTracerProvider}}t.TraceAPI=c},377:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deleteBaggage=t.setBaggage=t.getActiveBaggage=t.getBaggage=void 0;let n=r(339),s=r(421),a=(0,s.createContextKey)("OpenTelemetry Baggage Key");function i(e){return e.getValue(a)||void 0}t.getBaggage=i,t.getActiveBaggage=function(){return i(n.ContextAPI.getInstance().active())},t.setBaggage=function(e,t){return e.setValue(a,t)},t.deleteBaggage=function(e){return e.deleteValue(a)}},496:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaggageImpl=void 0;class r{constructor(e){this._entries=e?new Map(e):new Map}getEntry(e){let t=this._entries.get(e);if(t)return Object.assign({},t)}getAllEntries(){return Array.from(this._entries.entries()).map(([e,t])=>[e,t])}setEntry(e,t){let n=new r(this._entries);return n._entries.set(e,t),n}removeEntry(e){let t=new r(this._entries);return t._entries.delete(e),t}removeEntries(...e){let t=new r(this._entries);for(let r of e)t._entries.delete(r);return t}clear(){return new r}}t.BaggageImpl=r},817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataSymbol=void 0,t.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")},701:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.baggageEntryMetadataFromString=t.createBaggage=void 0;let n=r(741),s=r(496),a=r(817),i=n.DiagAPI.instance();t.createBaggage=function(e={}){return new s.BaggageImpl(new Map(Object.entries(e)))},t.baggageEntryMetadataFromString=function(e){return"string"!=typeof e&&(i.error(`Cannot create baggage metadata from unknown type: ${typeof e}`),e=""),{__TYPE__:a.baggageEntryMetadataSymbol,toString:()=>e}}},388:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.context=void 0;let n=r(339);t.context=n.ContextAPI.getInstance()},44:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopContextManager=void 0;let n=r(421);t.NoopContextManager=class{active(){return n.ROOT_CONTEXT}with(e,t,r,...n){return t.call(r,...n)}bind(e,t){return t}enable(){return this}disable(){return this}}},421:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ROOT_CONTEXT=t.createContextKey=void 0,t.createContextKey=function(e){return Symbol.for(e)};class r{constructor(e){let t=this;t._currentContext=e?new Map(e):new Map,t.getValue=e=>t._currentContext.get(e),t.setValue=(e,n)=>{let s=new r(t._currentContext);return s._currentContext.set(e,n),s},t.deleteValue=e=>{let n=new r(t._currentContext);return n._currentContext.delete(e),n}}}t.ROOT_CONTEXT=new r},920:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.diag=void 0;let n=r(741);t.diag=n.DiagAPI.instance()},144:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagComponentLogger=void 0;let n=r(38);function s(e,t,r){let s=(0,n.getGlobal)("diag");if(s)return r.unshift(t),s[e](...r)}t.DiagComponentLogger=class{constructor(e){this._namespace=e.namespace||"DiagComponentLogger"}debug(...e){return s("debug",this._namespace,e)}error(...e){return s("error",this._namespace,e)}info(...e){return s("info",this._namespace,e)}warn(...e){return s("warn",this._namespace,e)}verbose(...e){return s("verbose",this._namespace,e)}}},689:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagConsoleLogger=void 0;let r=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}];t.DiagConsoleLogger=class{constructor(){for(let e=0;e<r.length;e++)this[r[e].n]=function(e){return function(...t){if(console){let r=console[e];if("function"!=typeof r&&(r=console.log),"function"==typeof r)return r.apply(console,t)}}}(r[e].c)}}},871:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createLogLevelDiagLogger=void 0;let n=r(133);t.createLogLevelDiagLogger=function(e,t){function r(r,n){let s=t[r];return"function"==typeof s&&e>=n?s.bind(t):function(){}}return e<n.DiagLogLevel.NONE?e=n.DiagLogLevel.NONE:e>n.DiagLogLevel.ALL&&(e=n.DiagLogLevel.ALL),t=t||{},{error:r("error",n.DiagLogLevel.ERROR),warn:r("warn",n.DiagLogLevel.WARN),info:r("info",n.DiagLogLevel.INFO),debug:r("debug",n.DiagLogLevel.DEBUG),verbose:r("verbose",n.DiagLogLevel.VERBOSE)}}},133:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiagLogLevel=void 0,function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"}(t.DiagLogLevel||(t.DiagLogLevel={}))},38:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unregisterGlobal=t.getGlobal=t.registerGlobal=void 0;let n=r(966),s=r(520),a=r(565),i=s.VERSION.split(".")[0],o=Symbol.for(`opentelemetry.js.api.${i}`),l=n._globalThis;t.registerGlobal=function(e,t,r,n=!1){var a;let i=l[o]=null!==(a=l[o])&&void 0!==a?a:{version:s.VERSION};if(!n&&i[e]){let t=Error(`@opentelemetry/api: Attempted duplicate registration of API: ${e}`);return r.error(t.stack||t.message),!1}if(i.version!==s.VERSION){let t=Error(`@opentelemetry/api: Registration of version v${i.version} for ${e} does not match previously registered API v${s.VERSION}`);return r.error(t.stack||t.message),!1}return i[e]=t,r.debug(`@opentelemetry/api: Registered a global for ${e} v${s.VERSION}.`),!0},t.getGlobal=function(e){var t,r;let n=null===(t=l[o])||void 0===t?void 0:t.version;if(n&&(0,a.isCompatible)(n))return null===(r=l[o])||void 0===r?void 0:r[e]},t.unregisterGlobal=function(e,t){t.debug(`@opentelemetry/api: Unregistering a global for ${e} v${s.VERSION}.`);let r=l[o];r&&delete r[e]}},565:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isCompatible=t._makeCompatibilityCheck=void 0;let n=r(520),s=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function a(e){let t=new Set([e]),r=new Set,n=e.match(s);if(!n)return()=>!1;let a={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(null!=a.prerelease)return function(t){return t===e};function i(e){return r.add(e),!1}return function(e){if(t.has(e))return!0;if(r.has(e))return!1;let n=e.match(s);if(!n)return i(e);let o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};return null!=o.prerelease||a.major!==o.major?i(e):0===a.major?a.minor===o.minor&&a.patch<=o.patch?(t.add(e),!0):i(e):a.minor<=o.minor?(t.add(e),!0):i(e)}}t._makeCompatibilityCheck=a,t.isCompatible=a(n.VERSION)},934:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.metrics=void 0;let n=r(128);t.metrics=n.MetricsAPI.getInstance()},28:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValueType=void 0,function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"}(t.ValueType||(t.ValueType={}))},962:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createNoopMeter=t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=t.NOOP_OBSERVABLE_GAUGE_METRIC=t.NOOP_OBSERVABLE_COUNTER_METRIC=t.NOOP_UP_DOWN_COUNTER_METRIC=t.NOOP_HISTOGRAM_METRIC=t.NOOP_COUNTER_METRIC=t.NOOP_METER=t.NoopObservableUpDownCounterMetric=t.NoopObservableGaugeMetric=t.NoopObservableCounterMetric=t.NoopObservableMetric=t.NoopHistogramMetric=t.NoopUpDownCounterMetric=t.NoopCounterMetric=t.NoopMetric=t.NoopMeter=void 0;class r{constructor(){}createHistogram(e,r){return t.NOOP_HISTOGRAM_METRIC}createCounter(e,r){return t.NOOP_COUNTER_METRIC}createUpDownCounter(e,r){return t.NOOP_UP_DOWN_COUNTER_METRIC}createObservableGauge(e,r){return t.NOOP_OBSERVABLE_GAUGE_METRIC}createObservableCounter(e,r){return t.NOOP_OBSERVABLE_COUNTER_METRIC}createObservableUpDownCounter(e,r){return t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC}addBatchObservableCallback(e,t){}removeBatchObservableCallback(e){}}t.NoopMeter=r;class n{}t.NoopMetric=n;class s extends n{add(e,t){}}t.NoopCounterMetric=s;class a extends n{add(e,t){}}t.NoopUpDownCounterMetric=a;class i extends n{record(e,t){}}t.NoopHistogramMetric=i;class o{addCallback(e){}removeCallback(e){}}t.NoopObservableMetric=o;class l extends o{}t.NoopObservableCounterMetric=l;class c extends o{}t.NoopObservableGaugeMetric=c;class u extends o{}t.NoopObservableUpDownCounterMetric=u,t.NOOP_METER=new r,t.NOOP_COUNTER_METRIC=new s,t.NOOP_HISTOGRAM_METRIC=new i,t.NOOP_UP_DOWN_COUNTER_METRIC=new a,t.NOOP_OBSERVABLE_COUNTER_METRIC=new l,t.NOOP_OBSERVABLE_GAUGE_METRIC=new c,t.NOOP_OBSERVABLE_UP_DOWN_COUNTER_METRIC=new u,t.createNoopMeter=function(){return t.NOOP_METER}},333:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NOOP_METER_PROVIDER=t.NoopMeterProvider=void 0;let n=r(962);class s{getMeter(e,t,r){return n.NOOP_METER}}t.NoopMeterProvider=s,t.NOOP_METER_PROVIDER=new s},966:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(652),t)},385:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t._globalThis=void 0,t._globalThis="object"==typeof globalThis?globalThis:r.g},652:function(e,t,r){var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(385),t)},251:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.propagation=void 0;let n=r(930);t.propagation=n.PropagationAPI.getInstance()},600:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTextMapPropagator=void 0,t.NoopTextMapPropagator=class{inject(e,t){}extract(e,t){return e}fields(){return[]}}},625:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultTextMapSetter=t.defaultTextMapGetter=void 0,t.defaultTextMapGetter={get(e,t){if(null!=e)return e[t]},keys:e=>null==e?[]:Object.keys(e)},t.defaultTextMapSetter={set(e,t,r){null!=e&&(e[t]=r)}}},978:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.trace=void 0;let n=r(967);t.trace=n.TraceAPI.getInstance()},76:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NonRecordingSpan=void 0;let n=r(304);t.NonRecordingSpan=class{constructor(e=n.INVALID_SPAN_CONTEXT){this._spanContext=e}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}addEvent(e,t){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}}},527:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracer=void 0;let n=r(339),s=r(542),a=r(76),i=r(994),o=n.ContextAPI.getInstance();t.NoopTracer=class{startSpan(e,t,r=o.active()){let n=!!(null==t?void 0:t.root);if(n)return new a.NonRecordingSpan;let l=r&&(0,s.getSpanContext)(r);return"object"==typeof l&&"string"==typeof l.spanId&&"string"==typeof l.traceId&&"number"==typeof l.traceFlags&&(0,i.isSpanContextValid)(l)?new a.NonRecordingSpan(l):new a.NonRecordingSpan}startActiveSpan(e,t,r,n){let a,i,l;if(arguments.length<2)return;2==arguments.length?l=t:3==arguments.length?(a=t,l=r):(a=t,i=r,l=n);let c=null!=i?i:o.active(),u=this.startSpan(e,a,c),h=(0,s.setSpan)(c,u);return o.with(h,l,void 0,u)}}},228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NoopTracerProvider=void 0;let n=r(527);t.NoopTracerProvider=class{getTracer(e,t,r){return new n.NoopTracer}}},387:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracer=void 0;let n=r(527),s=new n.NoopTracer;t.ProxyTracer=class{constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}startSpan(e,t,r){return this._getTracer().startSpan(e,t,r)}startActiveSpan(e,t,r,n){let s=this._getTracer();return Reflect.apply(s.startActiveSpan,s,arguments)}_getTracer(){if(this._delegate)return this._delegate;let e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):s}}},414:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProxyTracerProvider=void 0;let n=r(387),s=r(228),a=new s.NoopTracerProvider;t.ProxyTracerProvider=class{getTracer(e,t,r){var s;return null!==(s=this.getDelegateTracer(e,t,r))&&void 0!==s?s:new n.ProxyTracer(this,e,t,r)}getDelegate(){var e;return null!==(e=this._delegate)&&void 0!==e?e:a}setDelegate(e){this._delegate=e}getDelegateTracer(e,t,r){var n;return null===(n=this._delegate)||void 0===n?void 0:n.getTracer(e,t,r)}}},505:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SamplingDecision=void 0,function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(t.SamplingDecision||(t.SamplingDecision={}))},542:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSpanContext=t.setSpanContext=t.deleteSpan=t.setSpan=t.getActiveSpan=t.getSpan=void 0;let n=r(421),s=r(76),a=r(339),i=(0,n.createContextKey)("OpenTelemetry Context Key SPAN");function o(e){return e.getValue(i)||void 0}function l(e,t){return e.setValue(i,t)}t.getSpan=o,t.getActiveSpan=function(){return o(a.ContextAPI.getInstance().active())},t.setSpan=l,t.deleteSpan=function(e){return e.deleteValue(i)},t.setSpanContext=function(e,t){return l(e,new s.NonRecordingSpan(t))},t.getSpanContext=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t.spanContext()}},430:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceStateImpl=void 0;let n=r(450);class s{constructor(e){this._internalState=new Map,e&&this._parse(e)}set(e,t){let r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){let t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){!(e.length>512)&&(this._internalState=e.split(",").reverse().reduce((e,t)=>{let r=t.trim(),s=r.indexOf("=");if(-1!==s){let a=r.slice(0,s),i=r.slice(s+1,t.length);(0,n.validateKey)(a)&&(0,n.validateValue)(i)&&e.set(a,i)}return e},new Map),this._internalState.size>32&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let e=new s;return e._internalState=new Map(this._internalState),e}}t.TraceStateImpl=s},450:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateValue=t.validateKey=void 0;let r="[_0-9a-z-*/]",n=`[a-z]${r}{0,255}`,s=`[a-z0-9]${r}{0,240}@[a-z]${r}{0,13}`,a=RegExp(`^(?:${n}|${s})$`),i=/^[ -~]{0,255}[!-~]$/,o=/,|=/;t.validateKey=function(e){return a.test(e)},t.validateValue=function(e){return i.test(e)&&!o.test(e)}},757:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createTraceState=void 0;let n=r(430);t.createTraceState=function(e){return new n.TraceStateImpl(e)}},304:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.INVALID_SPAN_CONTEXT=t.INVALID_TRACEID=t.INVALID_SPANID=void 0;let n=r(762);t.INVALID_SPANID="0000000000000000",t.INVALID_TRACEID="00000000000000000000000000000000",t.INVALID_SPAN_CONTEXT={traceId:t.INVALID_TRACEID,spanId:t.INVALID_SPANID,traceFlags:n.TraceFlags.NONE}},902:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanKind=void 0,function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"}(t.SpanKind||(t.SpanKind={}))},994:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.wrapSpanContext=t.isSpanContextValid=t.isValidSpanId=t.isValidTraceId=void 0;let n=r(304),s=r(76),a=/^([0-9a-f]{32})$/i,i=/^[0-9a-f]{16}$/i;function o(e){return a.test(e)&&e!==n.INVALID_TRACEID}function l(e){return i.test(e)&&e!==n.INVALID_SPANID}t.isValidTraceId=o,t.isValidSpanId=l,t.isSpanContextValid=function(e){return o(e.traceId)&&l(e.spanId)},t.wrapSpanContext=function(e){return new s.NonRecordingSpan(e)}},832:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpanStatusCode=void 0,function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"}(t.SpanStatusCode||(t.SpanStatusCode={}))},762:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TraceFlags=void 0,function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"}(t.TraceFlags||(t.TraceFlags={}))},520:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="1.4.1"}},n={};function s(e){var r=n[e];if(void 0!==r)return r.exports;var a=n[e]={exports:{}},i=!0;try{t[e].call(a.exports,a,a.exports,s),i=!1}finally{i&&delete n[e]}return a.exports}s.ab="//";var a={};(()=>{Object.defineProperty(a,"__esModule",{value:!0}),a.trace=a.propagation=a.metrics=a.diag=a.context=a.INVALID_SPAN_CONTEXT=a.INVALID_TRACEID=a.INVALID_SPANID=a.isValidSpanId=a.isValidTraceId=a.isSpanContextValid=a.createTraceState=a.TraceFlags=a.SpanStatusCode=a.SpanKind=a.SamplingDecision=a.ProxyTracerProvider=a.ProxyTracer=a.defaultTextMapSetter=a.defaultTextMapGetter=a.ValueType=a.createNoopMeter=a.DiagLogLevel=a.DiagConsoleLogger=a.ROOT_CONTEXT=a.createContextKey=a.baggageEntryMetadataFromString=void 0;var e=s(701);Object.defineProperty(a,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return e.baggageEntryMetadataFromString}});var t=s(421);Object.defineProperty(a,"createContextKey",{enumerable:!0,get:function(){return t.createContextKey}}),Object.defineProperty(a,"ROOT_CONTEXT",{enumerable:!0,get:function(){return t.ROOT_CONTEXT}});var r=s(689);Object.defineProperty(a,"DiagConsoleLogger",{enumerable:!0,get:function(){return r.DiagConsoleLogger}});var n=s(133);Object.defineProperty(a,"DiagLogLevel",{enumerable:!0,get:function(){return n.DiagLogLevel}});var i=s(962);Object.defineProperty(a,"createNoopMeter",{enumerable:!0,get:function(){return i.createNoopMeter}});var o=s(28);Object.defineProperty(a,"ValueType",{enumerable:!0,get:function(){return o.ValueType}});var l=s(625);Object.defineProperty(a,"defaultTextMapGetter",{enumerable:!0,get:function(){return l.defaultTextMapGetter}}),Object.defineProperty(a,"defaultTextMapSetter",{enumerable:!0,get:function(){return l.defaultTextMapSetter}});var c=s(387);Object.defineProperty(a,"ProxyTracer",{enumerable:!0,get:function(){return c.ProxyTracer}});var u=s(414);Object.defineProperty(a,"ProxyTracerProvider",{enumerable:!0,get:function(){return u.ProxyTracerProvider}});var h=s(505);Object.defineProperty(a,"SamplingDecision",{enumerable:!0,get:function(){return h.SamplingDecision}});var d=s(902);Object.defineProperty(a,"SpanKind",{enumerable:!0,get:function(){return d.SpanKind}});var f=s(832);Object.defineProperty(a,"SpanStatusCode",{enumerable:!0,get:function(){return f.SpanStatusCode}});var p=s(762);Object.defineProperty(a,"TraceFlags",{enumerable:!0,get:function(){return p.TraceFlags}});var g=s(757);Object.defineProperty(a,"createTraceState",{enumerable:!0,get:function(){return g.createTraceState}});var m=s(994);Object.defineProperty(a,"isSpanContextValid",{enumerable:!0,get:function(){return m.isSpanContextValid}}),Object.defineProperty(a,"isValidTraceId",{enumerable:!0,get:function(){return m.isValidTraceId}}),Object.defineProperty(a,"isValidSpanId",{enumerable:!0,get:function(){return m.isValidSpanId}});var v=s(304);Object.defineProperty(a,"INVALID_SPANID",{enumerable:!0,get:function(){return v.INVALID_SPANID}}),Object.defineProperty(a,"INVALID_TRACEID",{enumerable:!0,get:function(){return v.INVALID_TRACEID}}),Object.defineProperty(a,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return v.INVALID_SPAN_CONTEXT}});let y=s(388);Object.defineProperty(a,"context",{enumerable:!0,get:function(){return y.context}});let w=s(920);Object.defineProperty(a,"diag",{enumerable:!0,get:function(){return w.diag}});let _=s(934);Object.defineProperty(a,"metrics",{enumerable:!0,get:function(){return _.metrics}});let b=s(251);Object.defineProperty(a,"propagation",{enumerable:!0,get:function(){return b.propagation}});let x=s(978);Object.defineProperty(a,"trace",{enumerable:!0,get:function(){return x.trace}}),a.default={context:y.context,diag:w.diag,metrics:_.metrics,propagation:b.propagation,trace:x.trace}})(),e.exports=a})()},63:e=>{"use strict";(()=>{"undefined"!=typeof __nccwpck_require__&&(__nccwpck_require__.ab="//");var t={};(()=>{/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */t.parse=function(t,r){if("string"!=typeof t)throw TypeError("argument str must be a string");for(var s={},a=t.split(n),i=(r||{}).decode||e,o=0;o<a.length;o++){var l=a[o],c=l.indexOf("=");if(!(c<0)){var u=l.substr(0,c).trim(),h=l.substr(++c,l.length).trim();'"'==h[0]&&(h=h.slice(1,-1)),void 0==s[u]&&(s[u]=function(e,t){try{return t(e)}catch(t){return e}}(h,i))}}return s},t.serialize=function(e,t,n){var a=n||{},i=a.encode||r;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!s.test(e))throw TypeError("argument name is invalid");var o=i(t);if(o&&!s.test(o))throw TypeError("argument val is invalid");var l=e+"="+o;if(null!=a.maxAge){var c=a.maxAge-0;if(isNaN(c)||!isFinite(c))throw TypeError("option maxAge is invalid");l+="; Max-Age="+Math.floor(c)}if(a.domain){if(!s.test(a.domain))throw TypeError("option domain is invalid");l+="; Domain="+a.domain}if(a.path){if(!s.test(a.path))throw TypeError("option path is invalid");l+="; Path="+a.path}if(a.expires){if("function"!=typeof a.expires.toUTCString)throw TypeError("option expires is invalid");l+="; Expires="+a.expires.toUTCString()}if(a.httpOnly&&(l+="; HttpOnly"),a.secure&&(l+="; Secure"),a.sameSite)switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:case"strict":l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"none":l+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return l};var e=decodeURIComponent,r=encodeURIComponent,n=/; */,s=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/})(),e.exports=t})()},937:e=>{"use strict";(()=>{var t={806:(e,t,r)=>{let n=r(190),s=Symbol("max"),a=Symbol("length"),i=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),c=Symbol("dispose"),u=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1,g=(e,t,r)=>{let n=e[d].get(t);if(n){let t=n.value;if(m(e,t)){if(y(e,n),!e[o])return}else r&&(e[f]&&(n.value.now=Date.now()),e[h].unshiftNode(n));return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[l])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[l]&&r>e[l]},v=e=>{if(e[a]>e[s])for(let t=e[h].tail;e[a]>e[s]&&null!==t;){let r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){let r=t.value;e[c]&&e[c](r.key,r.value),e[a]-=r.length,e[d].delete(r.key),e[h].removeNode(t)}};class w{constructor(e,t,r,n,s){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=s||0}}let _=(e,t,r,n)=>{let s=r.value;m(e,s)&&(y(e,r),e[o]||(s=void 0)),s&&t.call(n,s.value,s.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[s]=e.max||1/0;let t=e.length||p;if(this[i]="function"!=typeof t?p:t,this[o]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[l]=e.maxAge||0,this[c]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[f]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[s]=e||1/0,v(this)}get max(){return this[s]}set allowStale(e){this[o]=!!e}get allowStale(){return this[o]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[l]=e,v(this)}get maxAge(){return this[l]}set lengthCalculator(e){"function"!=typeof e&&(e=p),e!==this[i]&&(this[i]=e,this[a]=0,this[h].forEach(e=>{e.length=this[i](e.value,e.key),this[a]+=e.length})),v(this)}get lengthCalculator(){return this[i]}get length(){return this[a]}get itemCount(){return this[h].length}rforEach(e,t){t=t||this;for(let r=this[h].tail;null!==r;){let n=r.prev;_(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[h].head;null!==r;){let n=r.next;_(this,e,r,t),r=n}}keys(){return this[h].toArray().map(e=>e.key)}values(){return this[h].toArray().map(e=>e.value)}reset(){this[c]&&this[h]&&this[h].length&&this[h].forEach(e=>this[c](e.key,e.value)),this[d]=new Map,this[h]=new n,this[a]=0}dump(){return this[h].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[h]}set(e,t,r){if((r=r||this[l])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,o=this[i](t,e);if(this[d].has(e)){if(o>this[s])return y(this,this[d].get(e)),!1;let i=this[d].get(e),l=i.value;return this[c]&&!this[u]&&this[c](e,l.value),l.now=n,l.maxAge=r,l.value=t,this[a]+=o-l.length,l.length=o,this.get(e),v(this),!0}let f=new w(e,t,o,n,r);return f.length>this[s]?(this[c]&&this[c](e,t),!1):(this[a]+=f.length,this[h].unshift(f),this[d].set(e,this[h].head),v(this),!0)}has(e){if(!this[d].has(e))return!1;let t=this[d].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){let e=this[h].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[d].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],s=n.e||0;if(0===s)this.set(n.k,n.v);else{let e=s-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[d].forEach((e,t)=>g(this,t,!1))}}},76:e=>{e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},190:(e,t,r)=>{function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,s=arguments.length;r<s;r++)t.push(arguments[r]);return t}function s(e,t,r,n){if(!(this instanceof s))return new s(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=s,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new s(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},n.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new s(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,s=this.head;null!==s;)r.push(e.call(t,s.value,this)),s=s.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,s=this.tail;null!==s;)r.push(e.call(t,s.value,this)),s=s.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=0;null!==n;s++)r=e(r,n.value,s),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;null!==n;s--)r=e(r,n.value,s),n=n.prev;return r},n.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=0,a=this.head;null!==a&&s<e;s++)a=a.next;for(;null!==a&&s<t;s++,a=a.next)r.push(a.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var s=this.length,a=this.tail;null!==a&&s>t;s--)a=a.prev;for(;null!==a&&s>e;s--,a=a.prev)r.push(a.value);return r},n.prototype.splice=function(e,t){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,n=this.head;null!==n&&r<e;r++)n=n.next;for(var a=[],r=0;n&&r<t;r++)a.push(n.value),n=this.removeNode(n);null===n&&(n=this.tail),n!==this.head&&n!==this.tail&&(n=n.prev);for(var r=2;r<arguments.length;r++)n=function(e,t,r){var n=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,n,arguments[r]);return a},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(76)(n)}catch(e){}}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,n),i=!1}finally{i&&delete r[e]}return a.exports}n.ab="//";var s=n(806);e.exports=s})()},368:e=>{"use strict";!function(){var t={114:function(e){function t(e){if("string"!=typeof e)throw TypeError("Path must be a string. Received "+JSON.stringify(e))}function r(e,t){for(var r,n="",s=0,a=-1,i=0,o=0;o<=e.length;++o){if(o<e.length)r=e.charCodeAt(o);else if(47===r)break;else r=47;if(47===r){if(a===o-1||1===i);else if(a!==o-1&&2===i){if(n.length<2||2!==s||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2)){if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",s=0):s=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),a=o,i=0;continue}}else if(2===n.length||1===n.length){n="",s=0,a=o,i=0;continue}}t&&(n.length>0?n+="/..":n="..",s=2)}else n.length>0?n+="/"+e.slice(a+1,o):n=e.slice(a+1,o),s=o-a-1;a=o,i=0}else 46===r&&-1!==i?++i:i=-1}return n}var n={resolve:function(){for(var e,n,s="",a=!1,i=arguments.length-1;i>=-1&&!a;i--)i>=0?n=arguments[i]:(void 0===e&&(e=""),n=e),t(n),0!==n.length&&(s=n+"/"+s,a=47===n.charCodeAt(0));return(s=r(s,!a),a)?s.length>0?"/"+s:"/":s.length>0?s:"."},normalize:function(e){if(t(e),0===e.length)return".";var n=47===e.charCodeAt(0),s=47===e.charCodeAt(e.length-1);return(0!==(e=r(e,!n)).length||n||(e="."),e.length>0&&s&&(e+="/"),n)?"/"+e:e},isAbsolute:function(e){return t(e),e.length>0&&47===e.charCodeAt(0)},join:function(){if(0==arguments.length)return".";for(var e,r=0;r<arguments.length;++r){var s=arguments[r];t(s),s.length>0&&(void 0===e?e=s:e+="/"+s)}return void 0===e?".":n.normalize(e)},relative:function(e,r){if(t(e),t(r),e===r||(e=n.resolve(e))===(r=n.resolve(r)))return"";for(var s=1;s<e.length&&47===e.charCodeAt(s);++s);for(var a=e.length,i=a-s,o=1;o<r.length&&47===r.charCodeAt(o);++o);for(var l=r.length-o,c=i<l?i:l,u=-1,h=0;h<=c;++h){if(h===c){if(l>c){if(47===r.charCodeAt(o+h))return r.slice(o+h+1);if(0===h)return r.slice(o+h)}else i>c&&(47===e.charCodeAt(s+h)?u=h:0===h&&(u=0));break}var d=e.charCodeAt(s+h);if(d!==r.charCodeAt(o+h))break;47===d&&(u=h)}var f="";for(h=s+u+1;h<=a;++h)(h===a||47===e.charCodeAt(h))&&(0===f.length?f+="..":f+="/..");return f.length>0?f+r.slice(o+u):(o+=u,47===r.charCodeAt(o)&&++o,r.slice(o))},_makeLong:function(e){return e},dirname:function(e){if(t(e),0===e.length)return".";for(var r=e.charCodeAt(0),n=47===r,s=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(r=e.charCodeAt(i))){if(!a){s=i;break}}else a=!1;return -1===s?n?"/":".":n&&1===s?"//":e.slice(0,s)},basename:function(e,r){if(void 0!==r&&"string"!=typeof r)throw TypeError('"ext" argument must be a string');t(e);var n,s=0,a=-1,i=!0;if(void 0!==r&&r.length>0&&r.length<=e.length){if(r.length===e.length&&r===e)return"";var o=r.length-1,l=-1;for(n=e.length-1;n>=0;--n){var c=e.charCodeAt(n);if(47===c){if(!i){s=n+1;break}}else -1===l&&(i=!1,l=n+1),o>=0&&(c===r.charCodeAt(o)?-1==--o&&(a=n):(o=-1,a=l))}return s===a?a=l:-1===a&&(a=e.length),e.slice(s,a)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!i){s=n+1;break}}else -1===a&&(i=!1,a=n+1);return -1===a?"":e.slice(s,a)},extname:function(e){t(e);for(var r=-1,n=0,s=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(47===l){if(!a){n=o+1;break}continue}-1===s&&(a=!1,s=o+1),46===l?-1===r?r=o:1!==i&&(i=1):-1!==r&&(i=-1)}return -1===r||-1===s||0===i||1===i&&r===s-1&&r===n+1?"":e.slice(r,s)},format:function(e){var t,r;if(null===e||"object"!=typeof e)throw TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||""),t?t===e.root?t+r:t+"/"+r:r},parse:function(e){t(e);var r,n={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return n;var s=e.charCodeAt(0),a=47===s;a?(n.root="/",r=1):r=0;for(var i=-1,o=0,l=-1,c=!0,u=e.length-1,h=0;u>=r;--u){if(47===(s=e.charCodeAt(u))){if(!c){o=u+1;break}continue}-1===l&&(c=!1,l=u+1),46===s?-1===i?i=u:1!==h&&(h=1):-1!==i&&(h=-1)}return -1===i||-1===l||0===h||1===h&&i===l-1&&i===o+1?-1!==l&&(0===o&&a?n.base=n.name=e.slice(1,l):n.base=n.name=e.slice(o,l)):(0===o&&a?(n.name=e.slice(1,i),n.base=e.slice(1,l)):(n.name=e.slice(o,i),n.base=e.slice(o,l)),n.ext=e.slice(i,l)),o>0?n.dir=e.slice(0,o-1):a&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};n.posix=n,e.exports=n}},r={};function n(e){var s=r[e];if(void 0!==s)return s.exports;var a=r[e]={exports:{}},i=!0;try{t[e](a,a.exports,n),i=!1}finally{i&&delete r[e]}return a.exports}n.ab="//";var s=n(114);e.exports=s}()},926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{cookies:()=>h,draftMode:()=>d,headers:()=>u});var n=r(375),s=r(183),a=r(627),i=r(533),o=r(430),l=r(766);class c{get isEnabled(){return this._provider.isEnabled}enable(){if(!(0,l.staticGenerationBailout)("draftMode().enable()"))return this._provider.enable()}disable(){if(!(0,l.staticGenerationBailout)("draftMode().disable()"))return this._provider.disable()}constructor(e){this._provider=e}}function u(){if((0,l.staticGenerationBailout)("headers",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return s.h.seal(new Headers({}));let e=i.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: headers() expects to have requestAsyncStorage, none available.");return e.headers}function h(){if((0,l.staticGenerationBailout)("cookies",{link:"https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering"}))return n.Qb.seal(new a.q(new Headers({})));let e=i.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: cookies() expects to have requestAsyncStorage, none available.");let t=o.actionAsyncStorage.getStore();return t&&(t.isAction||t.isAppRoute)?e.mutableCookies:e.cookies}function d(){let e=i.requestAsyncStorage.getStore();if(!e)throw Error("Invariant: draftMode() expects to have requestAsyncStorage, none available.");return new c(e.draftMode)}},721:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DYNAMIC_ERROR_CODE:()=>n,DynamicServerError:()=>s});let n="DYNAMIC_SERVER_USAGE";class s extends Error{constructor(e){super("Dynamic server usage: "+e),this.digest=n}}},766:(e,t,r)=>{"use strict";r.r(t),r.d(t,{staticGenerationBailout:()=>o});var n=r(721),s=r(948);class a extends Error{constructor(...e){super(...e),this.code="NEXT_STATIC_GEN_BAILOUT"}}function i(e,t){let{dynamic:r,link:n}=t||{};return"Page"+(r?' with `dynamic = "'+r+'"`':"")+" couldn't be rendered statically because it used `"+e+"`."+(n?" See more info here: "+n:"")}let o=(e,t)=>{let r=s.staticGenerationAsyncStorage.getStore();if(null==r?void 0:r.forceStatic)return!0;if(null==r?void 0:r.dynamicShouldError){var o;throw new a(i(e,{...t,dynamic:null!=(o=null==t?void 0:t.dynamic)?o:"error"}))}if(r&&(r.revalidate=0),null==r?void 0:r.isStaticGeneration){let s=new n.DynamicServerError(i(e,{...t,link:"https://nextjs.org/docs/messages/dynamic-server-error"}));throw r.dynamicUsageDescription=e,r.dynamicUsageStack=s.stack,s}return!1}},803:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let n=new Proxy(e=>e,{get:(e,t)=>["hex","rgb","ansi256","bgHex","bgRgb","bgAnsi256"].includes(t)?()=>n:n}),s=n},996:()=>{"getAll"in Headers.prototype||(Headers.prototype.getAll=function(e){if("set-cookie"!==(e=e.toLowerCase()))throw Error("Headers.getAll is only supported for Set-Cookie header");let t=[...this.entries()].filter(([t])=>t===e);return t.map(([,e])=>e)})},183:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var n=r(291);class s extends Error{constructor(){super("Headers cannot be modified. Read more: https://nextjs.org/docs/app/api-reference/functions/headers")}static callable(){throw new s}}class a extends Headers{constructor(e){super(),this.headers=new Proxy(e,{get(t,r,s){if("symbol"==typeof r)return n.g.get(t,r,s);let a=r.toLowerCase(),i=Object.keys(e).find(e=>e.toLowerCase()===a);if(void 0!==i)return n.g.get(t,i,s)},set(t,r,s,a){if("symbol"==typeof r)return n.g.set(t,r,s,a);let i=r.toLowerCase(),o=Object.keys(e).find(e=>e.toLowerCase()===i);return n.g.set(t,o??r,s,a)},has(t,r){if("symbol"==typeof r)return n.g.has(t,r);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0!==a&&n.g.has(t,a)},deleteProperty(t,r){if("symbol"==typeof r)return n.g.deleteProperty(t,r);let s=r.toLowerCase(),a=Object.keys(e).find(e=>e.toLowerCase()===s);return void 0===a||n.g.deleteProperty(t,a)}})}static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"append":case"delete":case"set":return s.callable;default:return n.g.get(e,t,r)}}})}merge(e){return Array.isArray(e)?e.join(", "):e}static from(e){return e instanceof Headers?e:new a(e)}append(e,t){let r=this.headers[e];"string"==typeof r?this.headers[e]=[r,t]:Array.isArray(r)?r.push(t):this.headers[e]=t}delete(e){delete this.headers[e]}get(e){let t=this.headers[e];return void 0!==t?this.merge(t):null}has(e){return void 0!==this.headers[e]}set(e,t){this.headers[e]=t}forEach(e,t){for(let[r,n]of this.entries())e.call(t,n,r,this)}*entries(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase(),r=this.get(t);yield[t,r]}}*keys(){for(let e of Object.keys(this.headers)){let t=e.toLowerCase();yield t}}*values(){for(let e of Object.keys(this.headers)){let t=this.get(e);yield t}}[Symbol.iterator](){return this.entries()}}},291:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});class n{static get(e,t,r){let n=Reflect.get(e,t,r);return"function"==typeof n?n.bind(e):n}static set(e,t,r,n){return Reflect.set(e,t,r,n)}static has(e,t){return Reflect.has(e,t)}static deleteProperty(e,t){return Reflect.deleteProperty(e,t)}}},375:(e,t,r)=>{"use strict";r.d(t,{Qb:()=>i,_5:()=>l,vr:()=>c});var n=r(627),s=r(291);class a extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#cookiessetname-value-options")}static callable(){throw new a}}class i{static seal(e){return new Proxy(e,{get(e,t,r){switch(t){case"clear":case"delete":case"set":return a.callable;default:return s.g.get(e,t,r)}}})}}let o=Symbol.for("next.mutated.cookies");function l(e,t){let r=function(e){let t=e[o];return t&&Array.isArray(t)&&0!==t.length?t:[]}(t);if(0===r.length)return!1;let s=new n.n(e),a=s.getAll();for(let e of r)s.set(e);for(let e of a)s.set(e);return!0}class c{static wrap(e,t){let r=new n.n(new Headers);for(let t of e.getAll())r.set(t);let a=[],i=new Set,l=()=>{var e;let s=null==fetch.__nextGetStaticStore?void 0:null==(e=fetch.__nextGetStaticStore())?void 0:e.getStore();s&&(s.pathWasRevalidated=!0);let o=r.getAll();if(a=o.filter(e=>i.has(e.name)),t){let e=[];for(let t of a){let r=new n.n(new Headers);r.set(t),e.push(r.toString())}t(e)}};return new Proxy(r,{get(e,t,r){switch(t){case o:return a;case"delete":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{e.delete(...t)}finally{l()}};case"set":return function(...t){i.add("string"==typeof t[0]?t[0]:t[0].name);try{return e.set(...t)}finally{l()}};default:return s.g.get(e,t,r)}}})}}},627:(e,t,r)=>{"use strict";r.d(t,{n:()=>n.ResponseCookies,q:()=>n.RequestCookies});var n=r(928)},135:(e,t,r)=>{"use strict";r.r(t),r.d(t,{decode:()=>i,encode:()=>a});let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let e=0;e<n.length;e++)s[n.charCodeAt(e)]=e;let a=e=>{let t=new Uint8Array(e),r,s=t.length,a="";for(r=0;r<s;r+=3)a+=n[t[r]>>2]+n[(3&t[r])<<4|t[r+1]>>4]+n[(15&t[r+1])<<2|t[r+2]>>6]+n[63&t[r+2]];return s%3==2?a=a.substring(0,a.length-1)+"=":s%3==1&&(a=a.substring(0,a.length-2)+"=="),a},i=e=>{let t=.75*e.length,r=e.length,n,a=0,i,o,l,c;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let u=new ArrayBuffer(t),h=new Uint8Array(u);for(n=0;n<r;n+=4)i=s[e.charCodeAt(n)],o=s[e.charCodeAt(n+1)],l=s[e.charCodeAt(n+2)],c=s[e.charCodeAt(n+3)],h[a++]=i<<2|o>>4,h[a++]=(15&o)<<4|l>>2,h[a++]=(3&l)<<6|63&c;return u}},441:(e,t,r)=>{"use strict";let n;n=r(368),e.exports=n},430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{actionAsyncStorage:()=>s});var n=r(791);let s=(0,n.P)()},791:(e,t,r)=>{"use strict";r.d(t,{P:()=>i});let n=Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available");class s{disable(){throw n}getStore(){}run(){throw n}exit(){throw n}enterWith(){throw n}}let a=globalThis.AsyncLocalStorage;function i(){return a?new a:new s}},533:(e,t,r)=>{"use strict";r.r(t),r.d(t,{requestAsyncStorage:()=>s});var n=r(791);let s=(0,n.P)()},948:(e,t,r)=>{"use strict";r.r(t),r.d(t,{staticGenerationAsyncStorage:()=>s});var n=r(791);let s=(0,n.P)()}},e=>{var t=e(e.s=730);(_ENTRIES="undefined"==typeof _ENTRIES?{}:_ENTRIES)["middleware_app/api/openai-gpt/route"]=t}]);
//# sourceMappingURL=route.js.map